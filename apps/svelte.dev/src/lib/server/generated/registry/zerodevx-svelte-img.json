{
	"name": "@zerodevx/svelte-img",
	"description": "Create responsive and progressive images for SvelteKit.",
	"repo_url": "https://github.com/zerodevx/svelte-img",
	"authors": ["zerodevx"],
	"homepage": "https://github.com/zerodevx/svelte-img#readme",
	"downloads": 772,
	"updated": "2024-09-27T10:18:26.563Z",
	"tags": ["media"],
	"github_stars": 347,
	"typescript": true,
	"version": "2.1.2",
	"svelte_range": "^3.55.1 || ^4.0.0 || ^5.0.0",
	"kit_range": "^2.6.0",
	"last_rune_check_version": "2.1.2",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "@zerodevx/svelte-img",
				"version": "2.1.2",
				"size": 26448
			},
			{
				"name": "vite-imagetools",
				"version": "6.2.9",
				"size": 34948
			},
			{
				"name": "imagetools-core",
				"version": "6.0.4",
				"size": 77631
			},
			{
				"name": "sharp",
				"version": "0.33.5",
				"size": 502829
			},
			{
				"name": "color",
				"version": "4.2.3",
				"size": 16806
			},
			{
				"name": "color-string",
				"version": "1.9.1",
				"size": 10115
			},
			{
				"name": "color-name",
				"version": "1.1.4",
				"size": 6693
			},
			{
				"name": "simple-swizzle",
				"version": "0.2.2"
			},
			{
				"name": "is-arrayish",
				"version": "0.3.2",
				"size": 54720
			},
			{
				"name": "color-convert",
				"version": "2.0.1",
				"size": 27189
			},
			{
				"name": "semver",
				"version": "7.7.1",
				"size": 96674
			},
			{
				"name": "detect-libc",
				"version": "2.0.4",
				"size": 23652
			},
			{
				"name": "@rollup/pluginutils",
				"version": "5.1.4",
				"size": 58354
			},
			{
				"name": "@types/estree",
				"version": "1.0.7",
				"size": 26147
			},
			{
				"name": "estree-walker",
				"version": "2.0.2",
				"size": 50243
			},
			{
				"name": "picomatch",
				"version": "4.0.2",
				"size": 85237
			}
		],
		"dependencies": [
			[0, 1],
			[1, 2],
			[2, 3],
			[3, 4],
			[4, 5],
			[5, 6],
			[5, 7],
			[7, 8],
			[4, 9],
			[9, 6],
			[3, 10],
			[3, 11],
			[1, 12],
			[12, 13],
			[12, 14],
			[12, 15]
		],
		"circular": []
	},
	"readme": "# svelte-img\n\n> High-performance responsive/progressive images for SvelteKit.\n\nAutomatically transform local images into multiple widths and next-gen formats, then render a\nminimally invasive LQIP-included HTML representation into your SvelteKit project.\n\nIncludes special effects:\n\n- [x] Fade-in on image reveal\n- [x] Parallax vertical scroll effect\n\nHope you like cats. Demo: https://zerodevx.github.io/svelte-img/\n\n## Install\n\nInstall the package:\n\n```\n$ npm i -D @zerodevx/svelte-img\n```\n\nAdd `imagetools` plugin into your `vite.config.js`:\n\n```js\nimport { defineConfig } from 'vite'\nimport { sveltekit } from '@sveltejs/kit/vite'\nimport { imagetools } from '@zerodevx/svelte-img/vite'\n\nexport default defineConfig({\n  plugins: [sveltekit(), imagetools()]\n})\n```\n\nOptionally, to silence typescript\n[warnings](https://github.com/JonasKruckenberg/imagetools/issues/160) on image imports, create a new\nfile at `src/ambient.d.ts`:\n\n```js\n// Squelch warnings of image imports from your assets dir\ndeclare module '$lib/assets/*' {\n  var meta\n  export default meta\n}\n```\n\n### Under the hood\n\nLocal image transformations are delegated to the excellent\n[`vite-imagetools`](https://github.com/JonasKruckenberg/imagetools) with a custom `run` directive.\nThis preset generates optimised images with sensible defaults, including a `base64` low-quality\nimage placeholder.\n\nInvoke the preset with the `?as=run` query param:\n\n```js\nimport imageMeta from 'path/to/asset?as=run'\n```\n\n## Usage\n\nUse anywhere in your Svelte app:\n\n<!-- prettier-ignore -->\n```html\n<script>\n  // Import original full-sized image with `?as=run` query param\n  import cat from '$lib/assets/cat.jpg?as=run'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<Img class=\"cool kitty\" src=\"{cat}\" alt=\"Very meow\" />\n```\n\nThe image component renders into:\n\n```html\n<picture>\n  <source\n    type=\"image/avif\"\n    srcset=\"path/to/avif-480 480w, path/to/avif-1024 1024w, path/to/avif-1920 1920w\"\n  />\n  <source\n    type=\"image/webp\"\n    srcset=\"path/to/webp-480 480w, path/to/webp-1024 1024w, path/to/webp-1920 1920w\"\n  />\n  <source\n    type=\"image/jpeg\"\n    srcset=\"path/to/jpeg-480 480w, path/to/jpeg-1024 1024w, path/to/jpeg-1920 1920w\"\n  />\n  <img\n    class=\"cool kitty\"\n    width=\"1920\"\n    height=\"1080\"\n    loading=\"lazy\"\n    decoding=\"async\"\n    style=\"background: url(data:image/webp;base64,XXX) no-repeat center/cover\"\n    alt=\"Very meow\"\n    src=\"path/to/jpeg-1920\"\n  />\n</picture>\n```\n\n## Features\n\n### Change default widths/formats\n\nBy default, `svelte-img` generates 9 variants of an original full-sized image - at `480/1024/1920`\nwidths in `avif/webp/jpg` formats; and a `16px webp/base64` low-quality image placeholder (LQIP).\n\nTo change this globally, edit your `vite.config.js`:\n\n```js\nimport ...\n\n// By default, `run` is set to 'w=480;1024;1920&format=avif;webp;jpg' (9 variants)\nexport default defineConfig({\n  plugins: [\n    sveltekit(),\n    imagetools({\n      profiles: {\n        // Now we change `run` to generate 4 variants instead: 640/1280w in webp/jpg\n        run: new URLSearchParams('w=640;1280&format=webp;jpg')\n      }\n    })\n  ]\n})\n```\n\n> [!NOTE]  \n> `runDefaultDirectives` is deprecated and will be removed in the next major; use `profiles`\n> instead. When a profile is not used, behaviour falls back to standard `vite-imagetools`, which in\n> turn take defaults from `defaultDirectives` as usual, so both can co-exist.\n\n### Profiles\n\nUse profiles to manage multiple defaults. Define in your `vite.config.js`:\n\n```js\nexport default defineConfig({\n  plugins: [\n    sveltekit(),\n    imagetools({\n      profiles: {\n        sm: new URLSearchParams('w=640&format=webp;jpg'),\n        lg: new URLSearchParams('w=640;1280;1920&format=webp;jpg')\n      }\n    })\n  ]\n})\n```\n\nThen invoke in your app:\n\n```js\nimport sm from '$lib/a/1.jpg?as=sm' // use `sm` profile\nimport lg from '$lib/a/2.jpg?as=lg' // use `lg` profile\nimport normal from '$lib/a/3.jpg?as=run'\n```\n\n### On a per-image basis\n\nWidths/formats can be applied to a particular image. From your `.svelte` file:\n\n<!-- prettier-ignore -->\n```html\n<script>\n  // We override defaults to generate 4 variants: 720/1560w in webp/jpg\n  import src from '$lib/a/cat.jpg?w=720;1560&format=webp;jpg&as=run'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<Img {src} alt=\"cat\" />\n```\n\n> [!NOTE]  \n> Order of `format` matters - the _last_ format is used as the fallback image.\n\nIf just **one** variant is generated, then only the `<img>` tag renders, so:\n\n<!-- prettier-ignore -->\n```html\n<script>\n  // Generate only 1 variant: 640x640 in jpg\n  import src from '$lib/a/cat.jpg?w=640&h=640&format=jpg&as=run'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<Img {src} alt=\"cat\" />\n```\n\nRenders into:\n\n```html\n<img\n  width=\"640\"\n  height=\"640\"\n  loading=\"lazy\"\n  decoding=\"async\"\n  style=\"background: url(data:image/webp;base64,XXX) no-repeat center/cover\"\n  alt=\"cat\"\n  src=\"path/to/jpg-640\"\n/>\n```\n\n### Change LQIP width\n\nThe `run` directive takes an optional parameter that sets the LQIP's width. Using `?as=run` defaults\nto `16px` LQIP - functionally equivalent to `?as=run:16`. Increase for a higher quality LQIP (eg.\n`?as=run:32` for `32px` LQIP) at the expense of a larger inline `base64` (larger HTML size).\n\nTo disable LQIP, set `?as=run:0`.\n\nFor a dominant single-colour background, set `?as=run:1`, so:\n\n<!-- prettier-ignore -->\n```html\n<script>\n  import src from '$lib/a/cat.jpg?as=run:1'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<!-- Render img with dominant colour background -->\n<Img {src} alt=\"cat\" />\n```\n\nRenders into:\n\n<!-- prettier-ignore -->\n```html\n<picture>\n  <source ... />\n  <img ... style=\"background: #abcdef\" />\n</picture>\n```\n\n### Other transformations\n\nThe full [repertoire](https://github.com/JonasKruckenberg/imagetools/blob/main/docs/directives.md)\nof transformation directives offered by\n[`vite-imagetools`](https://github.com/JonasKruckenberg/imagetools) can be used.\n\n<!-- prettier-ignore -->\n```html\n<script>\n  // Generate all 9 variants at fixed 600px height\n  import src from '$lib/a/cat.jpg?h=600&fit=cover&normalize&as=run'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<Img {src} alt=\"cat\" />\n```\n\n### Responsive Image Sizes\n\nUse the `sizes` attribute to define media conditions that provide hints as to which image size to\nselect when those conditions are true. Read up more on\n[responsive images and the picture element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture).\n\n```html\n<script>\n  import src from '$lib/a/cat.jpg?w=480;800&as=run'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<!-- \nWhen the viewport is <=600px, tell the browser's image preloader that once \nthe CSS for our design has been parsed and applied, we expect the width of\nthe image in our design to be 480px. \n-->\n<img {src} alt=\"cat\" sizes=\"(max-width: 600px) 480px, 800px\" />\n```\n\nRenders into:\n\n```html\n<picture>\n  <source\n    type=\"image/avif\"\n    sizes=\"(max-width: 600px) 480px, 800px\"\n    srcset=\"path/to/avif-480 480w, path/to/avif-800 800w\"\n  />\n  <source\n    type=\"image/webp\"\n    sizes=\"(max-width: 600px) 480px, 800px\"\n    srcset=\"path/to/webp-480 480w, path/to/webp-800 800w\"\n  />\n  <source\n    type=\"image/jpeg\"\n    sizes=\"(max-width: 600px) 480px, 800px\"\n    srcset=\"path/to/jpeg-480 480w, path/to/jpeg-800 800w\"\n  />\n  <img\n    alt=\"cat\"\n    width=\"800\"\n    height=\"600\"\n    loading=\"lazy\"\n    decoding=\"async\"\n    src=\"path/to/jpeg-800\"\n    style=\"background: url(data:image/webp;base64,XXX) center center / cover no-repeat;\"\n  />\n</picture>\n```\n\n### Lazy loading\n\n`svelte-img` utilises the browser's native lazy loading capability by setting the `loading=\"lazy\"`\nattribute on the rendered `<img>` tag by default. This is supported by\n[most modern browsers](https://caniuse.com/loading-lazy-attr). To load an image eagerly instead:\n\n<!-- prettier-ignore -->\n```html\n<script>\n  import src from '$lib/a/cat.jpg?as=run'\n  import Img from '@zerodevx/svelte-img'\n</script>\n\n<Img {src} alt=\"cat\" loading=\"eager\" />\n```\n\n### Batch loading local images\n\nUse `Vite`'s `import.meta.glob` [feature](https://vitejs.dev/guide/features.html#glob-import).\n\n<!-- prettier-ignore -->\n```html\n<script>\n  import Img from '@zerodevx/svelte-img'\n\n  const modules = import.meta.glob('$lib/a/cats/*.*', {\n    import: 'default',\n    eager: true,\n    query: { w: 640, h: 640, fit: 'cover', as: 'run' }\n  })\n  const images = Object.entries(modules).map((i) => i[1])\n</script>\n\n{#each images as src}\n  <Img {src} alt=\"cat\" />\n{/each}\n```\n\n### Remote images from an API\n\nUse the `svelte-img` component on its own by passing a `src` object, like so:\n\n<!-- prettier-ignore -->\n```html\n<script>\nimport Img from '@zerodevx/svelte-img'\n\nconst src = {\n  sources: {\n    // Order is important; last format is fallback img\n    webp: 'path/to/480.webp 480w, ...', //srcset\n    jpeg: '...'\n  },\n  img: { src: 'path/to/img', w: 1920, h: 1080 },\n}\n</script>\n\n<Img {src} alt=\"cat\" />\n```\n\n### Blurred image placeholders\n\nNatively, browsers do already apply _some_ blur when displaying low resolution images. That's enough\nfor me, but you can apply your own using CSS.\n\n<!-- prettier-ignore -->\n```html\n<script>\n  import Img from '@zerodevx/svelte-img'\n  import src from '$lib/a/cat.jpg?as=run'\n  import { onMount } from 'svelte'\n\n  let ref, loaded\n  onMount(() => {\n    if (ref.complete) loaded = true\n  })\n</script>\n\n<div class=\"wrap\">\n  <Img {src} bind:ref on:load={() => (loaded = true)} />\n  <div class=\"blur\" class:loaded />\n</div>\n\n<style>\n  .wrap {\n    position: relative;\n    overflow: hidden;\n  }\n  .blur {\n    position: absolute;\n    inset: 0;\n    backdrop-filter: blur(20px);\n    pointer-events: none;\n  }\n  .loaded {\n    display: none;\n  }\n</style>\n```\n\n## Special Effects\n\n### Fade-in on reveal\n\nReveal images with a fade-in effect (aka medium.com) when they are loaded **and** in the viewport.\n\n<!-- prettier-ignore -->\n```html\n<script>\n  import src from '$lib/a/cat.jpg?as=run'\n  import { FxReveal as Img } from '@zerodevx/svelte-img'\n</script>\n\n<Img class=\"my-img\" {src} alt=\"cat\" />\n\n<style>\n  :global(.my-img) {\n    width: 640px;\n    height: 480px;\n    \n    /* These CSS vars (with their default values) are exposed */\n    --reveal-transform: scale(1.02);\n    --reveal-transition: opacity 1s ease-in, transform 0.8s ease-out;\n    --reveal-filter: blur(20px);\n  }\n</style>\n```\n\n### Parallax\n\nApply a vertical parallax scrolling effect to an image, where `factor` is a decimal value between 0\nand 1, that controls how much slower the element scrolls, relative to the scrolling speed:\n\n- A value closer to 0 is faster, while a value closer to 1 is slower.\n- A value of 1 behaves normally.\n- A value of 0 effectively makes the element fixed on the page.\n\nThe default factor is `0.75`.\n\n<!-- prettier-ignore -->\n```html\n<script>\n  import src from '$lib/a/cat.jpg?as=run'\n  import { FxParallax as Img } from '@zerodevx/svelte-img'\n</script>\n\n<Img class=\"my-img\" factor=\"0.5\" {src} alt=\"cat\" />\n\n<style>\n  :global(.my-img) {\n    width: 100%;\n    height: 28rem;\n  }\n</style>\n```\n\n## Development\n\nLibrary is packaged via [SvelteKit](https://kit.svelte.dev/docs/packaging). Standard Github\n[contribution workflow](https://docs.github.com/en/get-started/quickstart/contributing-to-projects)\napplies.\n\n### Tests\n\nEnd-to-end testing via [Playwright](https://github.com/microsoft/playwright). To run tests\nheadlessly:\n\n```\n$ npm run test\n```\n\n## Changelog\n\nPlease refer to the [releases](https://github.com/zerodevx/svelte-img/releases) page.\n\n## License\n\nISC\n",
	"legacy_svelte": true,
	"downloads_history": [
		[3596, 1054],
		[3603, 1178],
		[3610, 838],
		[3617, 861],
		[3624, 1504],
		[3631, 1456],
		[3638, 1019],
		[3645, 558],
		[3652, 1237],
		[3659, 1649],
		[3666, 1456],
		[3673, 1329],
		[3680, 1300],
		[3687, 1417],
		[3694, 1622],
		[3701, 1138],
		[3708, 1185],
		[3715, 1434],
		[3722, 1371],
		[3729, 1245],
		[3736, 1556],
		[3743, 1969],
		[3750, 1805],
		[3757, 1756],
		[3764, 1029],
		[3771, 1141],
		[3778, 1895],
		[3785, 1648],
		[3792, 1447],
		[3799, 1196],
		[3806, 1308],
		[3813, 1191],
		[3820, 1162],
		[3827, 1037],
		[3834, 862],
		[3841, 1301],
		[3848, 1010],
		[3855, 1046],
		[3862, 1154],
		[3869, 971],
		[3876, 570],
		[3883, 1215],
		[3890, 914],
		[3897, 1034],
		[3904, 940],
		[3911, 1131],
		[3918, 1091],
		[3925, 760],
		[3932, 879],
		[3939, 980],
		[3946, 624],
		[3953, 513],
		[3960, 623],
		[3967, 627],
		[3974, 798],
		[3981, 721],
		[3988, 662],
		[3995, 750],
		[4002, 623],
		[4009, 653],
		[4016, 653],
		[4023, 753],
		[4030, 628],
		[4037, 924],
		[4044, 775],
		[4051, 871],
		[4058, 833],
		[4065, 1051],
		[4072, 604],
		[4079, 809],
		[4086, 480],
		[4093, 693],
		[4100, 702],
		[4107, 725],
		[4114, 772],
		[4121, 555],
		[4128, 721],
		[4135, 407]
	],
	"esm": true,
	"cjs": false
}
