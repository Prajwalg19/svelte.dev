{
	"name": "svelte-google-auth",
	"description": "Implement Google authentication in SvelteKit applications.",
	"repo_url": "",
	"authors": ["halfdanj"],
	"downloads": 65,
	"updated": "2023-01-17T21:18:10.634Z",
	"tags": ["auth"],
	"typescript": true,
	"version": "0.7.2",
	"svelte_range": "^3.44.0",
	"kit_range": "next",
	"last_rune_check_version": "0.7.2",
	"github_stars": 0,
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "svelte-google-auth",
				"version": "0.7.2",
				"size": 27777
			},
			{
				"name": "cookie",
				"version": "0.5.0",
				"size": 23137
			},
			{
				"name": "jsonwebtoken",
				"version": "9.0.2",
				"size": 43482
			},
			{
				"name": "ms",
				"version": "2.1.3",
				"size": 6721
			},
			{
				"name": "jws",
				"version": "3.2.2",
				"size": 17682
			},
			{
				"name": "jwa",
				"version": "1.4.1",
				"size": 13688
			},
			{
				"name": "safe-buffer",
				"version": "5.2.1",
				"size": 32101
			},
			{
				"name": "ecdsa-sig-formatter",
				"version": "1.0.11",
				"size": 20588
			},
			{
				"name": "buffer-equal-constant-time",
				"version": "1.0.1"
			},
			{
				"name": "semver",
				"version": "7.7.1",
				"size": 96674
			},
			{
				"name": "lodash.once",
				"version": "4.1.1"
			},
			{
				"name": "lodash.includes",
				"version": "4.3.0"
			},
			{
				"name": "lodash.isnumber",
				"version": "3.0.3"
			},
			{
				"name": "lodash.isstring",
				"version": "4.0.1"
			},
			{
				"name": "lodash.isboolean",
				"version": "3.0.3"
			},
			{
				"name": "lodash.isinteger",
				"version": "4.0.4"
			},
			{
				"name": "lodash.isplainobject",
				"version": "4.0.6"
			},
			{
				"name": "googleapis",
				"version": "110.0.0",
				"size": 121174255
			},
			{
				"name": "googleapis-common",
				"version": "6.0.4",
				"size": 91641
			},
			{
				"name": "qs",
				"version": "6.14.0",
				"size": 268238
			},
			{
				"name": "side-channel",
				"version": "1.1.0",
				"size": 21545
			},
			{
				"name": "es-errors",
				"version": "1.3.0",
				"size": 12324
			},
			{
				"name": "object-inspect",
				"version": "1.13.4",
				"size": 102920
			},
			{
				"name": "side-channel-list",
				"version": "1.0.0",
				"size": 14741
			},
			{
				"name": "side-channel-map",
				"version": "1.0.1",
				"size": 13348
			},
			{
				"name": "call-bound",
				"version": "1.0.4",
				"size": 17106
			},
			{
				"name": "call-bind-apply-helpers",
				"version": "1.0.2",
				"size": 15952
			},
			{
				"name": "function-bind",
				"version": "1.1.2",
				"size": 31427
			},
			{
				"name": "get-intrinsic",
				"version": "1.3.0",
				"size": 46542
			},
			{
				"name": "es-define-property",
				"version": "1.0.1",
				"size": 10217
			},
			{
				"name": "es-object-atoms",
				"version": "1.1.1",
				"size": 11442
			},
			{
				"name": "get-proto",
				"version": "1.0.1",
				"size": 10840
			},
			{
				"name": "dunder-proto",
				"version": "1.0.1",
				"size": 13003
			},
			{
				"name": "gopd",
				"version": "1.2.0",
				"size": 9869
			},
			{
				"name": "has-symbols",
				"version": "1.1.0",
				"size": 23409
			},
			{
				"name": "hasown",
				"version": "2.0.2",
				"size": 8765
			},
			{
				"name": "math-intrinsics",
				"version": "1.1.0",
				"size": 17323
			},
			{
				"name": "side-channel-weakmap",
				"version": "1.0.2",
				"size": 14667
			},
			{
				"name": "uuid",
				"version": "9.0.1",
				"size": 123288
			},
			{
				"name": "extend",
				"version": "3.0.2",
				"size": 23461
			},
			{
				"name": "gaxios",
				"version": "5.1.3",
				"size": 73554
			},
			{
				"name": "is-stream",
				"version": "2.0.1",
				"size": 5927
			},
			{
				"name": "node-fetch",
				"version": "2.7.0",
				"size": 162253
			},
			{
				"name": "whatwg-url",
				"version": "5.0.0"
			},
			{
				"name": "tr46",
				"version": "0.0.3"
			},
			{
				"name": "webidl-conversions",
				"version": "3.0.1"
			},
			{
				"name": "https-proxy-agent",
				"version": "5.0.1",
				"size": 26008
			},
			{
				"name": "debug",
				"version": "4.4.0",
				"size": 42798
			},
			{
				"name": "agent-base",
				"version": "6.0.2",
				"size": 34582
			},
			{
				"name": "url-template",
				"version": "2.0.8"
			},
			{
				"name": "google-auth-library",
				"version": "8.9.0",
				"size": 516019
			},
			{
				"name": "jws",
				"version": "4.0.0",
				"size": 17682
			},
			{
				"name": "jwa",
				"version": "2.0.0",
				"size": 13685
			},
			{
				"name": "arrify",
				"version": "2.0.1",
				"size": 3185
			},
			{
				"name": "gtoken",
				"version": "6.1.2",
				"size": 38695
			},
			{
				"name": "google-p12-pem",
				"version": "4.0.1",
				"size": 25216
			},
			{
				"name": "node-forge",
				"version": "1.3.1",
				"size": 1657079
			},
			{
				"name": "base64-js",
				"version": "1.5.1",
				"size": 9624
			},
			{
				"name": "lru-cache",
				"version": "6.0.0",
				"size": 15643
			},
			{
				"name": "yallist",
				"version": "4.0.0",
				"size": 14752
			},
			{
				"name": "gcp-metadata",
				"version": "5.3.0",
				"size": 75154
			},
			{
				"name": "json-bigint",
				"version": "1.0.0",
				"size": 37345
			},
			{
				"name": "bignumber.js",
				"version": "9.3.0",
				"size": 351328
			},
			{
				"name": "fast-text-encoding",
				"version": "1.0.6",
				"size": 32194
			}
		],
		"dependencies": [
			[0, 1],
			[0, 2],
			[2, 3],
			[2, 4],
			[4, 5],
			[5, 6],
			[5, 7],
			[7, 6],
			[5, 8],
			[4, 6],
			[2, 9],
			[2, 10],
			[2, 11],
			[2, 12],
			[2, 13],
			[2, 14],
			[2, 15],
			[2, 16],
			[0, 17],
			[17, 18],
			[18, 19],
			[19, 20],
			[20, 21],
			[20, 22],
			[20, 23],
			[23, 21],
			[23, 22],
			[20, 24],
			[24, 25],
			[25, 26],
			[26, 21],
			[26, 27],
			[25, 28],
			[28, 26],
			[28, 29],
			[28, 21],
			[28, 30],
			[30, 21],
			[28, 27],
			[28, 31],
			[31, 32],
			[32, 26],
			[32, 21],
			[32, 33],
			[31, 30],
			[28, 33],
			[28, 34],
			[28, 35],
			[35, 27],
			[28, 36],
			[24, 21],
			[24, 28],
			[24, 22],
			[20, 37],
			[37, 25],
			[37, 21],
			[37, 28],
			[37, 22],
			[37, 24],
			[18, 38],
			[18, 39],
			[18, 40],
			[40, 39],
			[40, 41],
			[40, 42],
			[42, 43],
			[43, 44],
			[43, 45],
			[40, 46],
			[46, 47],
			[47, 3],
			[46, 48],
			[48, 47],
			[18, 49],
			[18, 50],
			[50, 51],
			[51, 52],
			[52, 6],
			[52, 7],
			[52, 8],
			[51, 6],
			[50, 53],
			[50, 40],
			[50, 54],
			[54, 51],
			[54, 40],
			[54, 55],
			[55, 56],
			[50, 57],
			[50, 58],
			[58, 59],
			[50, 60],
			[60, 40],
			[60, 61],
			[61, 62],
			[50, 63],
			[50, 7],
			[17, 50]
		],
		"circular": []
	},
	"readme": "# svelte-google-auth\n\n> :warning: **Work in progress**: Use at your own risk\n\nThis library makes it easy to use Google authentication in sveltekit. The library handles the interaction with [Google Identity Services](https://developers.google.com/identity), and stores the authenticated user in a cookie for subsequent visits.\n\nThe library makes it possible to run authorized google api calls from both client side and server side.\n\n## How does it work\n\nThe library follows in broad strokes the offical guide for [oauth2 code model](https://developers.google.com/identity/oauth2/web/guides/use-code-model#redirect-mode).\n\n1. The user authenticates with the site in a popup\n2. The popup responds with a code that gets send to the backend\n3. Backend converts the code to tokens (both access token and refresh token)\n4. The tokens get signed into a jwt httpOnly cookie, making every subsequent call to the backend authenticated\n5. The library returns the authenticated user back to the client using [page data](https://kit.svelte.dev/docs/load)\n\n## Example\n\n[/src/routes](/src/routes) Shows how the api can be used. Run `npm run dev` to run it locally.\n\n## Getting started\n\n### Install\n\nRun\n\n```\nnpm i svelte-google-auth\n```\n\n### Credentials\n\nTo use the library, first create a [OAuth2 Client Credentials](https://developers.google.com/identity/protocols/oauth2/web-server#creatingcred) in Google Cloud. Store the json file in your project, but make sure to not commiting the file to git.\n\nAdd `http://localhost:5173` as Authorized JavaScript origins, and\n`http://localhost:5173/_auth/callback` as Authorized redirect URIs\n\n### hooks\n\nIn `src/hooks.server.(js|ts)`, initialize the authentication hook.\n\n```ts\nimport { SvelteGoogleAuthHook } from 'svelte-google-auth/server';\nimport type { Handle } from '@sveltejs/kit';\n\n// Import client credentials from json file\nimport client_secret from '../client_secret.json';\n\nconst auth = new SvelteGoogleAuthHook(client_secret.web);\n\nexport const handle: Handle = async ({ event, resolve }) => {\n\treturn await auth.handleAuth({ event, resolve });\n};\n```\n\nThis hook creates url routes needed for authentication callbacks, and parses authentication cookies on each request.\n\n### +layout.server\n\nIn `src/routes/+layout.server.(js|ts)`, create the following load function:\n\n```ts\nimport { hydrateAuth } from 'svelte-google-auth/server';\nimport type { LayoutServerLoad } from './$types.js';\n\nexport const load: LayoutServerLoad = ({ locals }) => {\n\t// By calling hydateAuth, certain variables from locals are parsed to the client\n\t// allowing the client to access the user information and the client_id for login\n\treturn { ...hydrateAuth(locals) };\n};\n```\n\nTo force that a user is signed in, you can redirect user to login page from here as well\n\n```ts\nimport { hydrateAuth } from 'svelte-google-auth/server';\nimport type { LayoutServerLoad } from './$types.js';\n\nconst SCOPES = ['openid', 'profile', 'email'];\n\nexport const load: LayoutServerLoad = ({ locals, url }) => {\n\tif (!isSignedIn(locals)) {\n\t\tthrow redirect(302, generateAuthUrl(locals, url, SCOPES, url.pathname));\n\t}\n\t// By calling hydateAuth, certain variables from locals are parsed to the client\n\t// allowing the client to access the user information and the client_id for login\n\treturn { ...hydrateAuth(locals) };\n};\n```\n\n### Page\n\nYou can now use the library on any page/layout like this\n\n```html\n<script lang=\"ts\">\n\timport { invalidateAll } from '$app/navigation';\n\timport { signIn, signOut, initialize } from 'svelte-google-auth/client';\n\timport type { PageData } from './$types.js';\n\n\texport let data: PageData;\n\tinitialize(data, invalidateAll);\n</script>\n\n{data.auth.user?.name}\n<button on:click={() => signIn()}>Sign In</button>\n<button on:click={() => signOut()}>Sign Out</button>\n```\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3589, 37],
		[3596, 157],
		[3603, 127],
		[3610, 104],
		[3617, 211],
		[3624, 61],
		[3631, 156],
		[3638, 79],
		[3645, 68],
		[3652, 79],
		[3659, 79],
		[3666, 121],
		[3673, 61],
		[3680, 107],
		[3687, 82],
		[3694, 108],
		[3701, 228],
		[3708, 94],
		[3715, 66],
		[3722, 113],
		[3729, 154],
		[3736, 183],
		[3743, 253],
		[3750, 227],
		[3757, 97],
		[3764, 70],
		[3771, 137],
		[3778, 103],
		[3785, 213],
		[3792, 122],
		[3799, 191],
		[3806, 33],
		[3813, 29],
		[3820, 30],
		[3827, 11],
		[3834, 134],
		[3841, 151],
		[3848, 50],
		[3855, 65],
		[3862, 66],
		[3869, 128],
		[3876, 130],
		[3883, 105],
		[3890, 111],
		[3897, 116],
		[3904, 122],
		[3911, 53],
		[3918, 19],
		[3925, 17],
		[3932, 29],
		[3939, 61],
		[3946, 54],
		[3953, 32],
		[3960, 25],
		[3967, 46],
		[3974, 38],
		[3981, 36],
		[3988, 80],
		[3995, 56],
		[4002, 105],
		[4009, 10],
		[4016, 13],
		[4023, 121],
		[4030, 99],
		[4037, 137],
		[4044, 175],
		[4051, 142],
		[4058, 109],
		[4065, 87],
		[4072, 82],
		[4079, 45],
		[4086, 118],
		[4093, 48],
		[4100, 108],
		[4107, 94],
		[4114, 65],
		[4121, 95],
		[4128, 65]
	],
	"esm": true,
	"cjs": false
}
