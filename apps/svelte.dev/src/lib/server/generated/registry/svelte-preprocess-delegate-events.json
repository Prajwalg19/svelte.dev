{
	"name": "svelte-preprocess-delegate-events",
	"description": "Delegate events by on:* in Svelte components.",
	"repo_url": "https://github.com/baseballyama/svelte-preprocess-delegate-events",
	"authors": ["baseballyama"],
	"homepage": "https://github.com/baseballyama/svelte-preprocess-delegate-events#readme",
	"downloads": 149,
	"updated": "2024-05-09T12:16:12.839Z",
	"tags": ["tooling"],
	"github_stars": 53,
	"typescript": true,
	"version": "0.4.4",
	"svelte_range": ">=3 <5",
	"last_rune_check_version": "0.4.4",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "svelte-preprocess-delegate-events",
				"version": "0.4.4",
				"size": 35026
			},
			{
				"name": "magic-string",
				"version": "0.30.10",
				"size": 451985
			},
			{
				"name": "@jridgewell/sourcemap-codec",
				"version": "1.5.0",
				"size": 112815
			},
			{
				"name": "svelte",
				"version": "4.2.15",
				"size": 2632851
			},
			{
				"name": "acorn",
				"version": "8.14.1",
				"size": 547473
			},
			{
				"name": "code-red",
				"version": "1.0.4",
				"size": 55185
			},
			{
				"name": "@types/estree",
				"version": "1.0.7",
				"size": 26147
			},
			{
				"name": "estree-walker",
				"version": "3.0.3",
				"size": 17599
			},
			{
				"name": "periscopic",
				"version": "3.1.0",
				"size": 11219
			},
			{
				"name": "is-reference",
				"version": "3.0.3",
				"size": 3953
			},
			{
				"name": "css-tree",
				"version": "2.3.1",
				"size": 1190591
			},
			{
				"name": "mdn-data",
				"version": "2.0.30",
				"size": 602138
			},
			{
				"name": "source-map-js",
				"version": "1.2.1",
				"size": 139872
			},
			{
				"name": "aria-query",
				"version": "5.3.2",
				"size": 176114
			},
			{
				"name": "magic-string",
				"version": "0.30.17",
				"size": 467464
			},
			{
				"name": "axobject-query",
				"version": "4.1.0",
				"size": 110878
			},
			{
				"name": "locate-character",
				"version": "3.0.0",
				"size": 5325
			},
			{
				"name": "@ampproject/remapping",
				"version": "2.3.0",
				"size": 78946
			},
			{
				"name": "@jridgewell/gen-mapping",
				"version": "0.3.8",
				"size": 81596
			},
			{
				"name": "@jridgewell/set-array",
				"version": "1.2.1",
				"size": 17945
			},
			{
				"name": "@jridgewell/trace-mapping",
				"version": "0.3.25",
				"size": 169330
			},
			{
				"name": "@jridgewell/resolve-uri",
				"version": "3.1.2",
				"size": 53153
			},
			{
				"name": "svelte-parse-markup",
				"version": "0.1.2",
				"size": 7652
			}
		],
		"dependencies": [
			[0, 1],
			[1, 2],
			[0, 3],
			[3, 4],
			[3, 5],
			[5, 2],
			[5, 6],
			[5, 4],
			[5, 7],
			[7, 6],
			[5, 8],
			[8, 6],
			[8, 7],
			[8, 9],
			[9, 6],
			[3, 10],
			[10, 11],
			[10, 12],
			[3, 13],
			[3, 8],
			[3, 9],
			[3, 14],
			[14, 2],
			[3, 6],
			[3, 7],
			[3, 15],
			[3, 16],
			[3, 17],
			[17, 18],
			[18, 19],
			[18, 2],
			[18, 20],
			[20, 21],
			[20, 2],
			[17, 20],
			[3, 20],
			[3, 2],
			[0, 22]
		],
		"circular": []
	},
	"readme": "[![NPM license](https://img.shields.io/npm/l/svelte-preprocess-delegate-events.svg)](https://www.npmjs.com/package/svelte-preprocess-delegate-events)\n[![NPM version](https://img.shields.io/npm/v/svelte-preprocess-delegate-events.svg)](https://www.npmjs.com/package/svelte-preprocess-delegate-events)\n[![Code Style: Prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg)](https://github.com/prettier/prettier)\n[![Build Status](https://github.com/baseballyama/svelte-preprocess-delegate-events/workflows/CI/badge.svg?branch=main)](https://github.com/baseballyama/svelte-preprocess-delegate-events/actions?query=workflow:ci)\n[![Coverage Status](https://coveralls.io/repos/github/baseballyama/svelte-preprocess-delegate-events/badge.svg?branch=main)](https://coveralls.io/github/baseballyama/svelte-preprocess-delegate-events?branch=main)\n\n# Delegate events with `on:*` 🎉\n\n- 💡 Easy to use\n- ⚡️ No performance impact\n- 🔑 No type errors with [svelte-check](https://github.com/sveltejs/language-tools/tree/master/packages/svelte-check)\n\n## Try it on [Stackblitz](https://stackblitz.com/edit/sveltejs-kit-template-default-rwmhls?file=src%2Froutes%2F%2Bpage.svelte&terminal=dev) 🚀.\n\n# Overview\n\nSince 2019, one popular issue on the Svelte GitHub repository has been delegating all events.<br>\nhttps://github.com/sveltejs/svelte/issues/2837\n\nThis repository aims to solve this issue.\n\n# Example\n\n**Component.svelte**\n\n```svelte\n<!-- Delegate all events with `on:*` 🎉 -->\n<input on:* />\n```\n\n**App.svelte**\n\n```svelte\n<script>\n  import Component from './Component.svelte';\n</script>\n\n<!-- Handle events as desired -->\n<Component\n  on:input=\"{(e) => console.log(e.target.value)}\"\n  on:blur=\"{() => console.log('blur')}\"\n/>\n```\n\n# Prerequisites\n\nThis library needs Svelte 3 or Svelte 4.\n\n# Installation\n\n```shell\nnpm install -D svelte-preprocess-delegate-events\n```\n\n# Usage\n\nAfter installation, add this as a Svelte preprocessor.\n\n```js\n// svelte.config.js\nimport delegateEvents from \"svelte-preprocess-delegate-events/preprocess\";\n\nconst config = {\n  // Add this preprocessor at the end of the array.\n  preprocess: [delegateEvents()],\n};\n\nexport default config;\n```\n\n# Integration with svelte-check\n\nIf you want to use `svelte-check`, create `svelte-jsx.d.ts` at the project root and update `[tj]sconfig.json`.\n\n**svelte-jsx.d.ts**\n```ts\ndeclare namespace svelteHTML {\n  /**\n   * base: https://github.com/sveltejs/language-tools/blob/651db67858d18ace44d000d263ac57ed5590ea05/packages/svelte2tsx/svelte-jsx.d.ts#L42\n   */\n  type HTMLProps<Property extends string, Override> =\n    Omit<\n      Omit<import('svelte/elements').SvelteHTMLElements[Property], keyof EventsWithColon<Omit<svelte.JSX.IntrinsicElements[Property & string], svelte.JSX.AttributeNames>>> & EventsWithColon<Omit<svelte.JSX.IntrinsicElements[Property & string], svelte.JSX.AttributeNames>>,\n      keyof Override\n    > & Override & (Record<'on:*', (event: Event & { currentTarget: EventTarget & EventTarget }) => any | never> | object);\n}\n```\n\n**[tj]sconfig.json**\n```diff\n{\n+ \"include\": [\"./svelte-jsx.d.ts\"]\n}\n```\n\n# How the Preprocessor Works?\n\nThis chapter explains how the preprocessor functions. The preprocessor operates differently for Elements and Components.\n\n## Element\n\nConsider the following simple example:\n\n```svelte\n<!-- Parant.svelte -->\n<script>\n  import Child from './Child.svelte';\n</script>\n<Child on:click={() => console.log('clicked!')} />\n\n<!-- Child.svelte -->\n<button on:*>Click Me</button>\n```\n\nSvelte executes events registered in `component.$$.callbacks` when an event is triggered in a child component. In the example above, `component.$$.callbacks` is as follows:\n```js\ncomponent.$$.callbacks = {\n  click: () => console.log('clicked!')\n}\n```\n\nThis preprocessor adds a process to listen for events registered in `component.$$.callbacks` for elements with `on:*`. After preprocessing, Child.svelte looks like this:\n```svelte\n<!-- Child.svelte -->\n<script>\n  import { boundElements, registerDelegatedEvents } from 'svelte-preprocess-delegate-events/runtime';\n  import { get_current_component } from 'svelte/internal';\n  let button = boundElements();\n  const component = get_current_component();\n  $: registerDelegatedEvents(button.bounds, component, (handler) => handler, {});\n</script>\n\n<button bind:this={button.bounds}>Click Me</button>\n```\nNOTE: The reason for binding `<button>` to `button.bounds` instead of binding it to the `button` variable is to support cases where multiple elements exist, such as `<button>` in a `{#each}` block.\n\nIn this way, only events that are being listened to by the parent component are listened to, thus providing a mechanism with no performance overhead.\n\n## Component\n\nComponent uses a different mechanism than Element. Consider the following simple example:\n```svelte\n<!-- Parant.svelte -->\n<script>\n  import Child from './Child.svelte';\n</script>\n<Child on:click={() => console.log('clicked!')} />\n\n<!-- Child.svelte -->\n<script>\n  import GrandChild from './GrandChild.svelte';\n</script>\n<GrandChild on:* />\n\n<!-- GrandChild.svelte -->\n<button on:click on:blur>Click Me</button>\n```\n\nIf you are using `on:*` in `Child.svelte`, you need to forward all events from `GrandChild` to `Parent`. However, `Child` does not know what events are coming from `GrandChild`, so you need to do something. Specifically, when `GrandChild` triggers an event, it will refer to `component.$$.callbacks` to run its event handlers. By proxying `component.$$.callbacks`, you will know which events have been forwarded. Forwarded events can be communicated to the parent component so that the `Parent` component can handle the event.\n\nAfter preprocessing, it looks like this:\n```svelte\n<!-- Child.svelte -->\n<script>\n  import { boundComponents, proxyCallbacks } from 'svelte-preprocess-delegate-events/runtime';\n  import { get_current_component } from 'svelte/internal';\n  import GrandChild from './GrandChild.svelte';\n\n  const GrandChild = boundComponents();\n  const component = get_current_component();\n  $: proxyCallbacks(component, GrandChild.bounds, false);\n  </script>\n\n<GrandChild bind:this={GrandChild.bounds} />\n```\n\n# Note\n\n`on:*` does not support specifying event handlers directly because a useful use case could not be found. If you have a useful use case, please create a new issue.\n\n```svelte\n<script>\n  import Component from './Component.svelte';\n  const handleEvent = (e) => {\n    console.log(e);\n  }\n</script>\n\n<!-- Specifying event handler directly is not supported -->\n<input on:*=\"{handleEvent}\" />\n\n<!-- Specifying event handler directly is not supported -->\n<Component on:*=\"{handleEvent}\" />\n```\n\n# For Svelte 5 Users\n\nFor Svelte 5, event forwarding is natively supported.🎉\n\nhttps://svelte-5-preview.vercel.app/docs/event-handlers#bubbling-events\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3589, 35],
		[3596, 54],
		[3603, 268],
		[3610, 103],
		[3617, 30],
		[3624, 33],
		[3631, 55],
		[3638, 204],
		[3645, 45],
		[3652, 62],
		[3659, 69],
		[3666, 146],
		[3673, 117],
		[3680, 140],
		[3687, 195],
		[3694, 123],
		[3701, 231],
		[3708, 142],
		[3715, 110],
		[3722, 133],
		[3729, 140],
		[3736, 127],
		[3743, 100],
		[3750, 113],
		[3757, 118],
		[3764, 113],
		[3771, 115],
		[3778, 177],
		[3785, 267],
		[3792, 146],
		[3799, 118],
		[3806, 184],
		[3813, 152],
		[3820, 122],
		[3827, 156],
		[3834, 147],
		[3841, 179],
		[3848, 737],
		[3855, 111],
		[3862, 50],
		[3869, 55],
		[3876, 128],
		[3883, 138],
		[3890, 230],
		[3897, 181],
		[3904, 185],
		[3911, 153],
		[3918, 164],
		[3925, 194],
		[3932, 178],
		[3939, 165],
		[3946, 163],
		[3953, 233],
		[3960, 345],
		[3967, 247],
		[3974, 214],
		[3981, 335],
		[3988, 538],
		[3995, 262],
		[4002, 245],
		[4009, 179],
		[4016, 271],
		[4023, 538],
		[4030, 366],
		[4037, 375],
		[4044, 282],
		[4051, 332],
		[4058, 475],
		[4065, 331],
		[4072, 177],
		[4079, 400],
		[4086, 297],
		[4093, 155],
		[4100, 226],
		[4107, 172],
		[4114, 149],
		[4121, 397],
		[4128, 169]
	],
	"esm": true,
	"cjs": false
}
