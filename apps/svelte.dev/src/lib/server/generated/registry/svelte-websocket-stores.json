{
	"name": "svelte-websocket-stores",
	"description": "Synchronize Svelte stores across WebSocket connection.",
	"repo_url": "https://github.com/xt449/svelte-websocket-stores",
	"authors": ["binarybanana"],
	"homepage": "https://github.com/xt449/svelte-websocket-stores#readme",
	"downloads": 12,
	"updated": "2025-05-02T15:21:23.016Z",
	"tags": ["integration"],
	"github_stars": 0,
	"typescript": true,
	"version": "1.2.3",
	"svelte_range": "^3.0.0 || ^4.0.0 || ^5.0.0",
	"last_rune_check_version": "1.2.3",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "svelte-websocket-stores",
				"version": "1.2.3",
				"size": 13524
			}
		],
		"dependencies": [],
		"circular": []
	},
	"readme": "# svelte-websocket-stores\n\nSynchronize primitive-typed Svelte stores across a simple WebSocket connection.\n\n[![npm version](https://img.shields.io/npm/v/svelte-websocket-stores.svg)](https://www.npmjs.com/package/svelte-websocket-stores) [![license](https://img.shields.io/npm/l/svelte-websocket-stores.svg)](LICENSE)\n\n### Purpose\n\nThis was originally designed to allow touch panels to use [Svelte](https://www.npmjs.com/package/svelte) with any backend.\n\n## Usage\n\nInitialization\n`main.ts`\n```ts\nimport { WebSocketWrapper } from \"svelte-websocket-stores\"\n\nexport const sws: WebSocketWrapper = new WebSocketWrapper(\"ws://192.168.0.64:80\", \"tp1\");\nsws.start();\n```\n\nWrite-only example\n`component.svelte`\n```svelte\n<script>\n\timport { sws } from \"main.ts\";\n\n\tlet pressStore = sws.webSocketStore<boolean>(\"myCoolButton.press\");\n\n\tfunction press() {\n\t\t$pressStore = true;\n\t}\n\n\tfunction release() {\n\t\t$pressStore = false;\n\t}\n</script>\n\n<button\n\ton:pointerdown={press}\n\ton:pointerup={release}\n\ton:pointerout={release}>\n\t<slot />\n</button>\n```\n\nRead-only example\n`component.svelte`\n```svelte\n<script>\n\timport { sws } from \"main.ts\";\n\n\tlet sizeStore = sws.webSocketStore<number>(\"myList.size\");\n</script>\n\n<div>\n\t{#each { length: $sizeStore } as _, index}\n\t\t<slot />\n\t{/each}\n</div>\n```\n\n## WebSocket Message Format\n\nAll communication between a server and this library is over WebSocket.\n\nAll WebSocket messages are interpreted as JSON objects.\n\nThe message object is defined as:\n```ts\ntype Json = boolean | number | string | { [key: string]: Json } | Json[] | null;\ntype Message = {\n\tscope: string;\n\tid: string;\n\tvalue: Json;\n}\n```\nThe field `scope` identifies the scope of the client it comes from and limits which clients receive it when coming from the server.\nThe field `id` is the primary identifier and determines where the `value` field is stored.\n\n### Client\n\n#### Message Received\n1. The incoming text data is parsed as JSON.\n2. The object's `scope` field is checked if it is global (\"global\") or matches the client's local scope (for example \"tp1\"). If it does not match, the message is discarded.\n3. The local Svelte store is indexed by the object's `id` field from the dictionary holding the respectively typed stores.\n4. The store's value is assigned to the object's `value` field.\n\n### Server [^1]\n\n#### Client Connected\n1. Send the client messages for all the variables currently stored values\n\n#### Message Received\n1. The incoming text data is parsed as JSON.\n2. The variable is indexed by the object's `scope` and `id` fields from the dictionary holding the respectively typed variables.\n3. The variable's value is assigned to the object's `value` field.\n4. Send all clients a message for the new value.\n5. Handle any events.\n\n[^1]: This is the behavior expected by this WebSocket client\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3827, 215],
		[3834, 11],
		[3841, 133],
		[3848, 18],
		[3855, 176],
		[3862, 4],
		[3869, 205],
		[3876, 20],
		[3883, 13],
		[3890, 10],
		[3897, 8],
		[3904, 19],
		[3918, 17],
		[3925, 72],
		[3932, 168],
		[3939, 21],
		[3946, 72],
		[3953, 95],
		[3960, 53],
		[3967, 8],
		[3974, 6],
		[3981, 18],
		[3988, 3],
		[3995, 6],
		[4002, 3],
		[4009, 3],
		[4016, 6],
		[4023, 13],
		[4030, 5],
		[4037, 12],
		[4044, 15],
		[4051, 7],
		[4065, 1],
		[4072, 2],
		[4079, 1],
		[4086, 1],
		[4093, 87],
		[4100, 37],
		[4107, 8],
		[4114, 12],
		[4121, 12],
		[4128, 55],
		[4135, 64]
	],
	"esm": true,
	"cjs": false
}
