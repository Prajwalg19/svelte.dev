{
	"name": "@figliolia/enhanced-stores",
	"description": "Enhance Svelte stores with middleware for advanced state management.",
	"repo_url": "https://github.com/alexfigliolia/enhanced-stores",
	"authors": ["alexfigliolia"],
	"homepage": "https://github.com/alexfigliolia/enhanced-stores#readme",
	"downloads": 7,
	"updated": "2024-04-30T00:06:56.825Z",
	"tags": ["miscellaneous"],
	"github_stars": 0,
	"typescript": true,
	"version": "1.0.5",
	"svelte_range": "^4.1.1",
	"last_rune_check_version": "1.0.5",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "@figliolia/enhanced-stores",
				"version": "1.0.5",
				"size": 75989
			},
			{
				"name": "svelte",
				"version": "4.2.19",
				"size": 2633608
			},
			{
				"name": "acorn",
				"version": "8.14.1",
				"size": 547473
			},
			{
				"name": "code-red",
				"version": "1.0.4",
				"size": 55185
			},
			{
				"name": "@jridgewell/sourcemap-codec",
				"version": "1.5.0",
				"size": 112815
			},
			{
				"name": "@types/estree",
				"version": "1.0.7",
				"size": 26147
			},
			{
				"name": "estree-walker",
				"version": "3.0.3",
				"size": 17599
			},
			{
				"name": "periscopic",
				"version": "3.1.0",
				"size": 11219
			},
			{
				"name": "is-reference",
				"version": "3.0.3",
				"size": 3953
			},
			{
				"name": "css-tree",
				"version": "2.3.1",
				"size": 1190591
			},
			{
				"name": "mdn-data",
				"version": "2.0.30",
				"size": 602138
			},
			{
				"name": "source-map-js",
				"version": "1.2.1",
				"size": 139872
			},
			{
				"name": "aria-query",
				"version": "5.3.2",
				"size": 176114
			},
			{
				"name": "magic-string",
				"version": "0.30.17",
				"size": 467464
			},
			{
				"name": "axobject-query",
				"version": "4.1.0",
				"size": 110878
			},
			{
				"name": "locate-character",
				"version": "3.0.0",
				"size": 5325
			},
			{
				"name": "@ampproject/remapping",
				"version": "2.3.0",
				"size": 78946
			},
			{
				"name": "@jridgewell/gen-mapping",
				"version": "0.3.8",
				"size": 81596
			},
			{
				"name": "@jridgewell/set-array",
				"version": "1.2.1",
				"size": 17945
			},
			{
				"name": "@jridgewell/trace-mapping",
				"version": "0.3.25",
				"size": 169330
			},
			{
				"name": "@jridgewell/resolve-uri",
				"version": "3.1.2",
				"size": 53153
			}
		],
		"dependencies": [
			[0, 1],
			[1, 2],
			[1, 3],
			[3, 4],
			[3, 5],
			[3, 2],
			[3, 6],
			[6, 5],
			[3, 7],
			[7, 5],
			[7, 6],
			[7, 8],
			[8, 5],
			[1, 9],
			[9, 10],
			[9, 11],
			[1, 12],
			[1, 7],
			[1, 8],
			[1, 13],
			[13, 4],
			[1, 5],
			[1, 6],
			[1, 14],
			[1, 15],
			[1, 16],
			[16, 17],
			[17, 18],
			[17, 4],
			[17, 19],
			[19, 20],
			[19, 4],
			[16, 19],
			[1, 19],
			[1, 4]
		],
		"circular": []
	},
	"readme": "# Enhanced Stores\nAn extension of Svelte's `store` API's that support the usage of middleware enhancers! \n\n# Getting Started\n\n## Installation\n```bash\nnpm install --save @figliolia/enhanced-stores\n# or\nyarn add @figliolia/enhanced-stores\n```\n\n## Background \nSvelte Stores are a great way to manage isolated slices of state in your Svelte projects. Their only shortcoming is that they lack some of the convenient API's of more seasoned state management libraries such as Redux, MobX, and *__insert library here__*. \n\nThis library is designed to allow developers to polyfill their own features into their Svelte stores through a familiar middleware API.\n\nThis library wraps each stores provided by Svelte and **fully** implements their API's. \n\nThis means, you can drop in this library anywhere you're currently using `Svelte` stores - with no refactoring required!\n\n## Basic Usage\nTo begin using and creating middleware for your Svelte stores, simply import an `EnhancedWritable`, `EnhancedReadable`, or `EnhancedDerived`. Each of these instances work identically to `Svelte` stores and support `get()` and `$value` syntax:\n\n#### Creating Stores\n\n##### `EnhancedWriteable`\nThe `EnhancedWritable` is a `writable` instance that exposes a `registerMiddleware` method\n```typescript\nimport { EnhancedWritable } from \"@figliolia/enhanced-stores\";\n\nconst listItems = new EnhancedWritable(\"List Items\", [1, 2, 3]);\n/* \n  Enhanced Stores require a string as their first parameter\n\n  This string represents a name for this piece of state and \n  is used to identify specific stores from within your middleware\n\n  The parameters following the name are identical to Svelte's writable\n*/\n\nlistItems.set([1, 2, 3, 4]);\nlistItems.update(v => [...v, 4]);\nlistItems.subscribe((v) => {});\nlistItems.registerMiddleware(/* ...middleware */);\n\n$listItems // [1, 2, 3, 4]\nget(listItems) // [1, 2, 3, 4]\n```\n\n##### `EnhancedDerived`\nThe `EnhancedDerived` is a `derived` instance that exposes a `registerMiddleware` method\n```typescript\nimport { \n  EnhancedDerived,\n  EnhancedWritable, \n} from \"@figliolia/enhanced-stores\";\n\nconst base = new EnhancedWritable(\"Base Items\", [1, 2, 3]);\n// Create a derived instance from an EnhancedWritable or Svelte writable\nconst listItems = new EnhancedDerived(\n  \"List Items\",\n  base, \n  (v) => v.map(el => el + 1)\n);\n\nlistItems.subscribe((v) => {});\nlistItems.registerMiddleware(/* ...middleware */);\n\n$listItems // [2, 3, 4]\nget(listItems) // [2, 3, 4]\n```\n\n##### `EnhancedReadable`\nThe `EnhancedReadable` is a `readable` instance that exposes a `registerMiddleware` method\n```typescript\nimport { EnhancedReadable } from \"@figliolia/enhanced-stores\";\n\nconst time = new EnhancedReadable(\"Time\", Date.now(), set => {\n  const interval = setInterval(() => {\n    set(Date.now());\n  }, 1000);\n \n  return function stop() {\n    clearInterval(interval);\n  };\n});\n\nlistItems.subscribe((v) => {});\nlistItems.registerMiddleware(/* ...middleware */);\n\n$listItems // Unix time stamp\nget(listItems) // Unix time stamp\n```\n\n## Using Middleware\nThe primary purpose of this library and the stores it exposes is for creating enhancements to the default behavior of Svelte stores.\n\nLet's look at some useful examples\n\n\n### Logging Middleware \nThis library comes with a redux-like logging middleware for your stores. To enable it, import the `Logger` and one of the `Enhanced*` stores:\n\n```typescript\nimport { EnhancedWritable, Logger } from \"@figliolia/enhanced-stores\";\n\nconst ListItems = new EnhancedWritable(\"List Items\", [1, 2, 3]);\n\nif(process.env.NODE_ENV === \"development\") {\n  // Enable logging!\n  ListItems.registerMiddleware(new Logger());\n}\n\n// Set state using `set` or `update`\nListItems.set([1, 2, 3, 4]);\n// or\nListItems.update(v => [...v, 4]);\n```\nJust like that, you now have a history of your `writable's` state updates in your console during development mode.\n\n![Logs](images/Logging.png)\n\n\n#### Profiling Middleware\nIn addition to logging, this library comes with one of my more favored middlewares - a profiler for inefficient state updates. This middleware, will issue a warning to the console anytime it detects a bottleneck in one of your stores:\n\n```typescript\nimport { EnhancedWritable, Profiler } from \"@figliolia/enhanced-stores\";\n\nconst ListItems = new EnhancedWritable(\"List Items\", [1, 2, 3]);\n\nif(process.env.NODE_ENV === \"development\") {\n\t// Enable profiling!\n  ListItems.registerMiddleware(new Profiler());\n}\n\n// Set state \nListItems.update(v => {\n  // intentional bottleneck\n  for(let i = 0; i < 100000000; i++) {};\n  return [...v, 4];\n});\n```\nWhen bottlenecks are identified in your `writable` or `derived` state updates, you'll receive warnings like this one:\n\n![Logs](images/Profiling.png)\n\n### Building Your Own Middleware\nTo build your own middleware, simply extend the `Middleware` class provided by this library and override its methods:\n\n```typescript\nimport { Middleware } from \"@figliolia/enhanced-stores\";\n\nclass MyMiddleware<T> extends Middleware<T> {\n  public override onInitialize(name: string, state: T) {\n    // Execute logic on initialization of a store\n  }\n  public override onBeforeUpdate(name: string, state: T) {\n    // Execute logic before updates take place\n  }\n\n  public override onUpdate(name: string, state: T) {\n    // Execute logic after state updates\n  }\n} \n```\nEach method found above receives the name of the `writable`, `readable`, or `derived` store along with its current value.\n\n#### A Real World Example - Profiling\nTo better demonstrate how to build useful tools using the middleware API, let's build the `Profiling Middleware` found in this library:\n\n```typescript\nimport { Middleware } from \"@figliolia/enhanced-stores\";\n\n// Extend the Base class\nexport class Profiler<T> extends Middleware<T> {\n  public threshold: number;\n  private lastUpdate: number | null = null;\n\t// Accept a threshold parameter\n  constructor(threshold: number = 16) {\n    this.threshold = threshold;\n  }\n  // Capture a high-res timestamp before each update\n  public override onBeforeUpdate(name: string, state: T) {\n    this.lastUpdate = performance.now();\n  }\n\n  // Compare the current high-res timestamp with the previous\n  public override onUpdate(name: string, state: T) {\n    if(performance.now() - this.lastUpdate > this.threshold) {\n      // Issue a warning if a state update exceeds the threshold\n      console.warn(\"Slow state update detected on\", name);\n    }\n  }\n} \n```\n\n#### A Real World Example - Testing\nTesting stores using their update history can be a meaningful way to ensure that certain side-effects occur in your test cases. Let's create a middleware that tracks each update to your stores and provides a means for making assertions:\n\n```typescript\nimport { Middleware } from \"@figliolia/enhanced-stores\";\n\n// Extend the Base class\nexport class Testing<T> extends Middleware<T> {\n  public history: T[] = [];\n\n  // Push the initial value to the history array\n  public override onInitialization(name: string, state: T) {\n    this.history.push(state);\n  }\n\n  // Push each state update to the history array\n  public override onUpdate(name: string, state: T) {\n    this.history.push(state);\n  }\n\n  // Expose a method for asserting that the store's\n  // update history matches the input\n  public assert(history: T[]) {\n    const { length } = this.history;\n    for(let i = 0; i < length; i++) {\n      if(this.history[i] !== history[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n} \n```\n\nSimply register this middleware on your stores in testing environments and make assertions based on the store's update history\n\n## Factories\nIn your application, you may find yourself registering the same middleware to each new store you create. To reduce the amount of boiler plate required to enhance your stores, this library comes with an `EnhancerFactory`.\n\nEnhancer Factories are factories that are constructed with one or more middleware. From your factories, you can spawn, `readable`, `writable`, and `derived` stores with your middleware already registered to them:\n\n```typescript\nimport { EnhancerFactory, Logger, Profiler } from \"@figliolia/enhanced-stores\";\n\nconst Factory = new EnhancerFactory(\n  new Logger(), \n  new Profiler()\n  // ...and so on\n);\n\nconst writable = Factory.createWritable(/* enhanced store arguments*/);\nconst derived = Factory.createDerived(/* enhanced derived arguments*/);\nconst readable = Factory.createReadable(/* enhanced readable arguments*/);\n```\nEach of the `create` methods found on the `Factory` will return an `enhanced` readable, writable, or derived instance with the `Logger` and `Profiler` registered to it.\n\n## Contributing\nThis library was built with the intention of adding some useful mechanisms for extending the behavior of Svelte stores. It's designed to help Svelte Stores reach some feature-parity with popular state management tools that have become prolific in the frontend world.\n\nIf you see identify a bug or a better way of achieving this, your contributions and welcome and supported.",
	"legacy_svelte": false,
	"downloads_history": [
		[3589, 4],
		[3596, 5],
		[3603, 4],
		[3610, 2],
		[3624, 1],
		[3631, 1],
		[3638, 1],
		[3645, 3],
		[3652, 4],
		[3659, 96],
		[3666, 72],
		[3673, 133],
		[3680, 23],
		[3687, 46],
		[3694, 38],
		[3701, 60],
		[3708, 36],
		[3715, 43],
		[3722, 33],
		[3729, 32],
		[3736, 28],
		[3743, 27],
		[3750, 39],
		[3757, 49],
		[3764, 43],
		[3771, 99],
		[3778, 38],
		[3785, 70],
		[3792, 50],
		[3799, 85],
		[3806, 100],
		[3813, 68],
		[3820, 90],
		[3827, 85],
		[3834, 105],
		[3841, 82],
		[3848, 88],
		[3855, 87],
		[3862, 104],
		[3869, 86],
		[3876, 81],
		[3883, 98],
		[3890, 75],
		[3897, 115],
		[3904, 74],
		[3911, 62],
		[3918, 39],
		[3925, 19],
		[3932, 17],
		[3939, 17],
		[3946, 20],
		[3953, 12],
		[3960, 4],
		[3967, 9],
		[3974, 1],
		[3981, 6],
		[3995, 1],
		[4016, 13],
		[4023, 3],
		[4037, 10],
		[4044, 7],
		[4051, 4],
		[4058, 1],
		[4065, 1],
		[4072, 1],
		[4086, 7],
		[4093, 6],
		[4107, 24],
		[4114, 7],
		[4121, 7],
		[4128, 2]
	],
	"esm": true,
	"cjs": true
}
