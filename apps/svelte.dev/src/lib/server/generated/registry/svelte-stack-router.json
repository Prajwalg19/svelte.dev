{
	"name": "svelte-stack-router",
	"description": "Create stack-based navigation for Svelte web apps.",
	"repo_url": "https://github.com/cdellacqua/svelte-stack-router",
	"authors": ["cdellacqua"],
	"homepage": "https://github.com/cdellacqua/svelte-stack-router",
	"downloads": 23,
	"updated": "2021-11-16T22:04:58.397Z",
	"tags": ["router"],
	"github_stars": 43,
	"typescript": true,
	"version": "2.4.6",
	"svelte_range": "^3.38.2",
	"last_rune_check_version": "2.4.6",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "svelte-stack-router",
				"version": "2.4.6",
				"size": 164313
			},
			{
				"name": "regexparam",
				"version": "1.3.0",
				"size": 10257
			}
		],
		"dependencies": [[0, 1]],
		"circular": []
	},
	"readme": "# svelte-stack-router\n\nBridging the gap between Native Apps and WebApps. A Svelte Router that caches page components and will make your WebApp feel more native\n\n\n[NPM Package](https://www.npmjs.com/package/svelte-stack-router)\n\n`npm install svelte-stack-router`\n\n## Working demo\n\n[svelte-stack-router demo](https://cdellacqua.github.io/svelte-stack-router/#/)\n\nThe demo files can be found in [src/](https://github.com/cdellacqua/svelte-stack-router/blob/master/src/)\n\n## Quick setup\n\n- install this package `npm install --save-dev svelte-stack-router`\n- open/create the component that will contain the StackRouter\n- define your routes as key-value pairs, like in the following example\n\t```javascript\n\tconst myRoutes = {\n\t\t\"/\": Home,\n\t\t\"/my-page\": PageComponent,\n\t\t\"/my-other-page/:someString\": OtherPageThatAcceptsAParameter,\n\t\t\"/my-other-page2/:optionalParam?\": OtherPageThatAcceptsAnOptionalParameter,\n\t\t\"*\": NotFound,\n\t};\n\t```\n- import the StackRouter component\n- add `<StackRouter routes={myRoutes} />` somewhere in the HTML section\n\nExample:\n\n`App.svelte`\n```svelte\n<script>\n\timport { StackRouter } from 'svelte-stack-router';\n\timport Home from './Home.svelte';\n\timport NotFound from './NotFound.svelte';\n\n\tconst routes = {\n\t\t\"/\": Home,\n\t\t\"*\": NotFound\n\t};\n</script>\n<StackRouter {routes} />\n```\n\n## How it works\n\nPage components are cached, this ensures that going back in the browser history resumes the complete previous state.\n\nIn other words: **previously instantiated pages don't get destroyed by default, they just get paused and resumed to reduce re-renders and preserve their full state**.\n\nNote that **a cached page is uniquely identified by its route template** (i.e. the key in the `routes/myRoutes` objects in the examples above), *not by the component*.\n\n## Enhanced lifecycle functions\n\nIn addition to the `onMount` and `onDestroy` lifecycle functions provided by Svelte, this library offers `onPause`, `onResume`, `onBeforeLoad`, `onBeforeUnload`, `onAfterLoad` and `onAfterUnload`.\n\nAll these new lifecycle functions accept synchronous and asynchronous callbacks. In case of asynchronous callbacks they are executed one by one in the same order they were registered.\n\nThe complete lifecycle is (|| = semi-parallel execution, achieved with Promise.all):\n- create the page component if not in cache\n- before-unload previous component || before-load new component\n- pause previous component if resumable || resume new component if in cache || animate-transition\n- after-unload previous component || after-load new component\n- destroy previous component if not resumable\n\nAll these additional lifecycle functions can be called by the Page component and by its children **during initialization**, this means they should be invoked directly in the script section of the Svelte component (e.g. not inside onMount or in reactive statements).\n\nIf you have a component which shouldn't be paused or resumed by the StackRouter, you can call `setResumable(false)`\n\nDoing this will make your component disposable, so that it will be mounted and destroyed and never paused or resumed.\n\n### Notes on StackRouter destruction\n\nWhen the `<StackRouter />` components gets unmounted (e.g. if it is inside an `{#if ...}`), all the components that were previously cached by it \nwill be destroyed. In particular, if the currently active component has registered any `onBeforeUnload`, `onPause` or `onAfterUnload` callbacks, those\nwill get executed before the destruction of the component with a boolean parameter set to `true` to signal the urgency to clean up.\n\n```svelte\n<script>\n\tonAfterUnload((force) => {\n\t\tif (force) {\n\t\t\t// non interactive operations\n\t\t} else {\n\t\t\t// asks for a user interaction (e.g. confirmation modal)\n\t\t}\n\t});\n</script>\n```\n\n## Router events\n\nYou can listen for the following events:\n- `on:navigation-start` emitted before unloading the old page and before loading the new page\n- `on:navigation-end` emitted after unloading the old page and after loading the new page\n- `on:forbidden` emitted when a route couldn't be reached because a guard returned a falsy value\n\t- ```\n\t\t{\n\t\t\tmessage: 'access forbidden by guard',\n\t\t\tparams: <page params preview, if any>,\n\t\t\tlocation: <location the router was trying to navigate to>\n\t\t}\n\t\t```\n- `on:error` emitted when a route couldn't be reached due to an error. The error can be one of the following (`<...>` indicates some value at runtime):\n\t- ```\n\t\t{\n\t\t\tmessage: 'no route found',\n\t\t\tlocation: <location the router was trying to navigate to>\n\t\t}\n\t\t```\n\t- ```\n\t\t{\n\t\t\tmessage: 'unable to get component from provider',\n\t\t\tlocation: <location the router was trying to navigate to>,\n\t\t\terr: <error thrown by the provider function>\n\t\t}\n\t\t```\n\t- ```\n\t\t{\n\t\t\tmessage: 'guard error',\n\t\t\tparams: <page params preview, if any>,\n\t\t\tlocation: <location the router was trying to navigate to>,\n\t\t\terr: <error thrown by the guard>\n\t\t}\n\t\t```\n\nExample:\n```svelte\n<StackRouter {routes} on:navigation-start={() => alert('navigation started')} />\n```\n\n## Navigation functions, links and stores\n\n### Programmatic navigation\nThe following functions enable programmatic navigation:\n- `push('/some-route')`\n- `pop()` or `pop({ some: 'return value' })` (see [Returning values](#returning-values))\n- `replace('/a-route')`\n\n### Links\nThis library also provides a custom `use:link` action that you can add to your `<a>` elements to create links. This action serves two purposes:\n- if you are using the router in \"hash mode\" (e.g. in a purely client-side rendering context), it lets you write paths without having to manually add the `#` prefix to all the `href`. For example `<a href=\"/example-1\" use:link>Example</a>` (or `<a use:link={\"/example-1\"}>Example</a>`) is automatically\nconverted to `<a href=\"#/example-1\">Example</a>`. This is particularly helpful if you later decide to switch to \"path mode\" (see next point)\n- if you are using the router in \"path mode\" (e.g. in a server-side rendering context), it prevents the default browser navigation behavior and, on user click, pushes the new location using the History API of the browser\n\n### Stores\nTo easily access information about the current route, you can import the following stores:\n- `location`: reflects the relative URL, without the leading '#' if in hash mode\n- `pathname`: store derived from location that extracts the path section of the URL\n- `search`: store derived from location that extracts the query string (starting from '?' included)\n\nFor example, if you are on a page like http://localhost:5000/#/home/some-page/?someParam=a%20string, the following comparisons will be true:\n- `$location === \"/home/some-page/?someParam=a%20string\"`\n- `$pathname === \"/home/some-page/\"`\n- `$search === \"?someParam=a%20string\"`\n\n\nThese features have been heavily inspired by [svelte-spa-router](https://github.com/ItalyPaleAle/svelte-spa-router).\n\n## Returning values\n\nWhen the `pop` function is called it can receive an optional parameter, which acts like a return value.\n\nThis value will be passed on as an argument to all the callback functions that are registered in the `onResume` hook of the component that is about to be resumed, thus allowing two components to communicate with each other.\n\nFor example:\n- suppose the user is on `/selection`, a page that presents them with a list of items and expects them to pick one. In the same page there is an `Add` button\n- the user clicks on the `Add` button, thus navigating to `/new`, a page with a form where they can POST a new item to the list\n- the user submits the form and, in the submit handler, `pop` is called with the `id` of the newly created entity\n- the user gets brought back to `/selection`, which, being resumable, can handle the return value in its `onResume` callback(s) and show the selection on the newly created entity\n\nFor example:\n- Selection page\n\t```svelte\n\t<script>\n\t\tonResume((newElementId) => {\n\t\t\t// handle newElementId\n\t\t})\n\t</script>\n\t```\n- Add page\n\t```svelte\n\t<script>\n\t\tasync function add() {\n\t\t\tconst newElementId = await axios.post('/some-endpoint', {\n\t\t\t\t// data\n\t\t\t});\n\t\t\tpop(newElementId);\n\t\t}\n\t</script>\n\t```\nYou can look at an actual implementation in the live demo source code.\n\n\n## Customizing behavior\n\nThe `<StackRouter>` component supports a variety of options:\n\n|name|type|description|default|\n|-|-|-|-|\n|defaultResumable|boolean|whether or not the default behavior should be to resume or recreate the components|true|\n|useHash|boolean|whether or not to prefix routes with '#' to implement a server-agnostic client side routing (e.g. no need to redirect 404 to index)|true|\n|restoreScroll|boolean|whether or not to restore the scroll position when navigating backwards|true|\n|transitionFn|TransitionFunction|a function that handles the transition between two pages|dive(300)|\n|routes|Record.<string, SvelteComponentConstructor>|a key-value object associating a route path (e.g. '/a/route/path/:variable1?) to a SvelteComponent constructor|N/A - **required**|\n\n## Advanced routing\n\nThis router supports guards and asynchronously provided components (e.g. when using lazy loading).\n\nGuards are functions that can either return a `boolean` or a `Promise<boolean>`. They are called sequentially and\nthe first one to return (or resolve to) `false` causes a navigation error (\"access forbidden by guard\").\n\nIf a route has some parameters, the guard will receive them before the component.\n\nGuard type:\n```typescript\nexport type Guard = (paramsPreview?: Params) => boolean | Promise<boolean>;\n```\n\n\nHere are some examples:\n- provide a component asynchronously:\n\n\t`App.svelte`\n\t```svelte\n\t<script>\n\t\timport { StackRouter } from 'svelte-stack-router';\n\t\timport Home from './Home.svelte';\n\n\t\tconst routes = {\n\t\t\t\"/\": Home,\n\t\t\t\"*\": { componentProvider: () => import('./NotFound.svelte') }\n\t\t};\n\t</script>\n\t<StackRouter {routes} />\n\t```\n- add guards to a route:\n \n\t`App.svelte`\n\t```svelte\n\t<script>\n\t\timport { StackRouter } from 'svelte-stack-router';\n\t\timport Home from './Home.svelte';\n\t\timport Login from './Login.svelte';\n\t\timport NotFound from './NotFound.svelte';\n\t\timport user from './user';\n\n\t\tconst routes = {\n\t\t\t\"/login\": {\n\t\t\t\tcomponent: Login,\n\t\t\t\t// You can have multiple guards\n\t\t\t\tguards: [\n\t\t\t\t\t() => $user === null,\n\t\t\t\t\t\n\t\t\t\t\t// Each guard gets a preview of the params that are going to\n\t\t\t\t\t// be passed to the component if all guards return true\n\t\t\t\t\t(paramsPreview) => Number.isNumber(paramsPreview.id),\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"/\": Home,\n\t\t\t\"*\": NotFound\n\t\t};\n\t</script>\n\t<StackRouter {routes} />\n\t```\n- add guards to a route with an async component provider:\n\t\n\t`App.svelte`\n\t```svelte\n\t<script>\n\t\timport { StackRouter } from 'svelte-stack-router';\n\t\timport Home from './Home.svelte';\n\t\timport NotFound from './NotFound.svelte';\n\n\t\tconst routes = {\n\t\t\t\"/\": Home,\n\t\t\t\"/login\": {\n\t\t\t\tcomponentProvider: () => import('./Login.svelte'),\n\t\t\t\t// You can use \"guard\" instead of \"guards\" if you\n\t\t\t\t// want to pass only one function instead of an array\n\t\t\t\tguard: () => $user === null,\n\t\t\t},\n\t\t\t\"*\": NotFound\n\t\t};\n\t</script>\n\t<StackRouter {routes} />\n\t```\n\n### TransitionFunction and available transitions\n\nThis library provides 3 types of transitions between pages:\n- `dive(milliseconds)` transition with a dive effect\n- `slide(milliseconds)` transition with a slide effect\n- `noAnimation()` transition without any animation\n\n\nYou can also implement a custom transition animation by implementing a transition function that reflect the following type definition:\n```typescript\n/**\n * A function that handles the transition between two pages\n * @param {NavigationType} data.navigationType describes the navigation that occurred (e.g. backward, replace, forward, ...)\n * @param {HTMLElement} data.mountPointToLoad the mount point of the page that is being loaded\n * @param {HTMLElement} data.mountPointToUnload the mount point of the page that is being unloaded\n * @param {HTMLElement} data.routerMountPoint the router mount point, when this function is called it contains both the mountPointToLoad and the mountPointToUnload\n * @param {{x: number, y: number}} data.scroll if scroll restoration is enabled and the current component is being resumed, this object contains the x and y coordinates needed to bring the window scrollbars back to where they were when the component was paused\n * @return {Promise} a promise that resolves once the transition has finished\n */\nexport type TransitionFunction = (data: TransitionFunctionData) => Promise<void>;\n```\n\nYou can also generate a TransitionFunction using the helpers provided in transition-functions.js\n",
	"legacy_svelte": true,
	"downloads_history": [
		[3596, 113],
		[3603, 47],
		[3610, 45],
		[3617, 1],
		[3624, 6],
		[3631, 1],
		[3638, 16],
		[3645, 2],
		[3652, 8],
		[3659, 3],
		[3666, 44],
		[3673, 3],
		[3680, 1],
		[3687, 6],
		[3694, 1],
		[3701, 1],
		[3708, 3],
		[3715, 2],
		[3722, 2],
		[3729, 85],
		[3736, 4],
		[3743, 1],
		[3750, 14],
		[3757, 4],
		[3764, 4],
		[3771, 1],
		[3778, 2],
		[3785, 43],
		[3792, 3],
		[3799, 3],
		[3806, 3],
		[3813, 5],
		[3820, 1],
		[3827, 1],
		[3834, 5],
		[3841, 5],
		[3848, 13],
		[3855, 208],
		[3862, 4],
		[3869, 3],
		[3876, 2],
		[3883, 3],
		[3890, 49],
		[3897, 3],
		[3904, 2],
		[3918, 2],
		[3925, 4],
		[3932, 4],
		[3939, 3],
		[3946, 9],
		[3953, 13],
		[3960, 15],
		[3967, 49],
		[3974, 7],
		[3981, 9],
		[3995, 3],
		[4002, 7],
		[4009, 3],
		[4016, 9],
		[4023, 7],
		[4030, 44],
		[4037, 20],
		[4044, 29],
		[4051, 16],
		[4058, 8],
		[4065, 1],
		[4079, 2],
		[4086, 1],
		[4093, 56],
		[4100, 45],
		[4107, 13],
		[4114, 23],
		[4121, 24],
		[4128, 24],
		[4135, 37]
	],
	"esm": true,
	"cjs": true
}
