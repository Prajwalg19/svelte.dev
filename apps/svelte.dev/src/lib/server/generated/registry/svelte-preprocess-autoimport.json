{
	"name": "svelte-preprocess-autoimport",
	"description": "Automatically import and createEventDispatcher in Svelte.",
	"repo_url": "https://github.com/rixo/svelte-preprocess-autoimport",
	"authors": ["rixo"],
	"homepage": "https://github.com/rixo/svelte-preprocess-autoimport",
	"downloads": 7,
	"updated": "2020-11-08T14:48:38.989Z",
	"tags": ["tooling"],
	"github_stars": 21,
	"typescript": false,
	"version": "0.2.1",
	"svelte_range": "^3.25.1",
	"last_rune_check_version": "0.2.1",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "svelte-preprocess-autoimport",
				"version": "0.2.1",
				"size": 18937
			}
		],
		"dependencies": [],
		"circular": []
	},
	"readme": "# svelte-preprocess-autoimport\n\n> A preprocessor for automatic imports & createEventDispatcher.\n\nAutomatically adds import lines for `onMount`, etc.\n\nAlso automatically writes `const dispatch = createEventDispatcher()` for you.\n\nThe preprocessor puts the import statements in the blank spaces of your source files, so sourcemaps are unaffected.\n\n![autoimport in action](./demo.gif)\n\n## Example\n\nWrite:\n\n```svelte\n<script>\n  onMount(() => {\n    // ...\n  })\n</script>\n\n<button on:click={() => dispatch('event')} />\n\n<div transition:fade />\n```\n\nGet:\n\n```svelte\n<script>\n  import { onMount, createEventDispatcher } from 'svelte';\n  import { fade } from 'svelte/transition';\n\n  const dispatch = createEventDispatcher();\n\n  onMount(() => {\n    // ...\n  })\n</script>\n\n<button on:click={() => dispatch('event')} />\n\n<div transition:fade />\n```\n\nThe transformed code that is actually produced is formatted like this to avoid breaking sourcemaps:\n\n```svelte\n<script>import { onMount, createEventDispatcher } from 'svelte'; const dispatch = createEventDispatcher(); import { fade } from 'svelte/transition';\n  onMount(() => {\n    // ...\n  })\n</script>\n\n<button on:click={() => dispatch('event')} />\n```\n\n## User beware: Magic globals considered harmful\n\nWhile less typing is obviously convenient, as it is often the case in programming, one needs to also consider the trade off we're making. Adding magic to a codebase often backfires more or less ~~spectacularly~~ annoyingly, experience teaches us.\n\nHere's one seasoned developer comments about this project:\n\n> I hate magic globals. It makes onboarding a nightmare.\n> Theyâ€™re bad enough in tests where they are broadly known. Framework specific ones are even worse. It also adds a bunch of limitations in how you name stuff. This one of the reasons svelte opts for explicit over implicit. It aids comprehension. Optimising for writability over readability and comprehension is a mistake imo.\n>\n> -- @pngwn, Discord 2020-09-23\n\nThis is actually an opinion that I embrace wholeheartedly, which probably seems a bit conflicted given I've made a tool to do exactly what is decried here...\n\nTo be clear, I'm not sure using this is a good idea in the long run. Really not sure, that is I'm not sure it's a bad idea either.\n\nI've got a feeling we may be on a special case here. Imports from the root `svelte` package (`onMount`, `onDestroy`, `createEventDispatcher`...) are deeply ingrained in the framework. You can't use Svelte and not have them. They almost feel more like keywords of the Svelte DSL than normal imports.\n\nIn my views, Svelte is all about striking the right balance between dogmatism and pragmatism, in a quest for efficiency and simplicity. I feel that these \"magic imports\", if they are limited to the framework's own exports, might (or might not) get us closer to this balance. Maybe this balance is not the same for everyone and every projects...\n\nAnd, for sure, micromanaging imports of `onMount` and such, that are ubiquitous in a codebase and can come and go during a component's development cycle can become a bit tedious. That's why I'm inclined, in this one case, to experiment with allowing a bit of magic to percolate into my codebase. To see if the gain is as much as I hoped. To see if I face some major drawbacks. In a nutshell, to experiment.\n\nI think that's how you should take it too, if you decide to use this at this point. And, also, don't overlook pondering the above considerations.\n\nThat being said, let's go to play!\n\n## Install\n\n```bash\nyarn add -D svelte-preprocess-autoimport\n```\n\n## Usage\n\nIn your Svelte config (example is for Rollup, but preprocessors are portable so it should work anywhere Svelte):\n\n```js\nimport autoimport from 'svelte-preprocess-autoimport'\nimport svelte from 'rollup-plugin-svelte-hot'\n\n...\n\nexport default {\n  ...\n  plugins: [\n    svelte({\n      ...\n      preprocess: [\n        autoimport()\n      ]\n    })\n  ]\n}\n```\n\n## Config\n\n```js\nautoimport({\n  aliases: {\n    // short form\n    //\n    // produces: import { onMount } from 'svelte'\n    onMount: 'svelte',\n    // produces: import { onDestroy } from 'svelte'\n    onDestroy: 'svelte',\n\n    // long form\n    //\n    // produces: import { onMount as useEffect } from 'svelte'\n    useEffect: {\n      import: 'onMount',\n      from: 'svelte',\n    },\n  },\n\n  // if the value (e.g. `$$dispatch`) is found in the code, then\n  // createEventDispatcher will be imported an a dispatch variable with this\n  // name will be created.\n  //\n  // NOTE: leading $ prefixes will be transformed to _ in the processed code\n  //\n  createEventDispatcher: '$$dispatch', // default: 'dispatch'\n})\n```\n\nThe [default config](https://github.com/rixo/svelte-preprocess-autoimport/blob/master/src/index.js#L3) is to automatize all imports from `svelte` and `svelte/*`.\n\nYou can pass a function to customize the default config:\n\n```js\n// e.g. a more conservative config that only aliases imports from `svelte` and\n// createEventDispatcher automation\nautoimport(defaults => ({\n  ...defaults,\n  aliases: {\n    ...Object.fromEntries(\n      Object.entries(defaults.aliases).filter(\n        ([imp, from]) => from === 'svelte'\n      )\n    ),\n  },\n}))\n```\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3596, 10],
		[3603, 8],
		[3610, 10],
		[3617, 8],
		[3624, 2],
		[3631, 4],
		[3645, 4],
		[3659, 1],
		[3666, 10],
		[3673, 9],
		[3680, 1],
		[3687, 1],
		[3694, 1],
		[3701, 1],
		[3708, 1],
		[3715, 1],
		[3729, 9],
		[3757, 17],
		[3764, 5],
		[3771, 3],
		[3778, 1],
		[3785, 1],
		[3792, 2],
		[3799, 1],
		[3806, 4],
		[3820, 1],
		[3827, 1],
		[3834, 2],
		[3848, 2],
		[3855, 7],
		[3862, 35],
		[3876, 1],
		[3883, 9],
		[3890, 26],
		[3897, 1],
		[3904, 9],
		[3918, 1],
		[3932, 1],
		[3946, 1],
		[3953, 1],
		[3960, 3],
		[3967, 4],
		[3974, 2],
		[3981, 1],
		[3988, 3],
		[3995, 2],
		[4009, 5],
		[4016, 3],
		[4023, 7],
		[4030, 9],
		[4037, 11],
		[4044, 16],
		[4051, 1],
		[4058, 2],
		[4065, 6],
		[4086, 2],
		[4093, 10],
		[4100, 9],
		[4107, 4],
		[4114, 7],
		[4121, 11],
		[4128, 7]
	]
}
