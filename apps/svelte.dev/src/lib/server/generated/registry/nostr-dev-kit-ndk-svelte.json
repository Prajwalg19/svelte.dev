{
	"name": "@nostr-dev-kit/ndk-svelte",
	"description": "Provides convenience functions for using NDK with Svelte.",
	"repo_url": "",
	"authors": ["jinglescode", "pablof7z"],
	"downloads": 96,
	"updated": "2025-05-02T14:23:42.821Z",
	"tags": ["integration"],
	"typescript": true,
	"version": "2.4.15",
	"svelte_range": "*",
	"last_rune_check_version": "2.4.15",
	"github_stars": 0,
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "@nostr-dev-kit/ndk-svelte",
				"version": "2.4.15",
				"size": 26670
			},
			{
				"name": "@nostr-dev-kit/ndk",
				"version": "2.14.9",
				"size": 2638221
			},
			{
				"name": "@noble/curves",
				"version": "1.9.0",
				"size": 1697790
			},
			{
				"name": "@noble/hashes",
				"version": "1.8.0",
				"size": 1145416
			},
			{
				"name": "@noble/secp256k1",
				"version": "2.2.3",
				"size": 85614
			},
			{
				"name": "@scure/base",
				"version": "1.2.5",
				"size": 163342
			},
			{
				"name": "debug",
				"version": "4.4.0",
				"size": 42798
			},
			{
				"name": "ms",
				"version": "2.1.3",
				"size": 6721
			},
			{
				"name": "light-bolt11-decoder",
				"version": "3.2.0",
				"size": 59002
			},
			{
				"name": "@scure/base",
				"version": "1.1.1",
				"size": 46440
			},
			{
				"name": "tseep",
				"version": "1.3.1",
				"size": 105222
			},
			{
				"name": "typescript-lru-cache",
				"version": "2.0.0",
				"size": 99819
			}
		],
		"dependencies": [
			[0, 1],
			[1, 2],
			[2, 3],
			[1, 3],
			[1, 4],
			[1, 5],
			[1, 6],
			[6, 7],
			[1, 8],
			[8, 9],
			[1, 10],
			[1, 11]
		],
		"circular": []
	},
	"readme": "# ndk-svelte\n\nThis package provides convenience functionalities to make usage of NDK with Svelte nicer.\n\n## Install\n\n```\npnpm add @nostr-dev-kit/ndk-svelte\n```\n\n## Store subscriptions\n\nNDK-svelte provides Svelte Store subscriptions so your components can have simple reactivity\nwhen events arrive.\n\nEvents in the store will appear in a set ordered by `created_at`.\n\n```typescript\nimport NDKSvelte from \"@nostr-dev-kit/ndk-svelte\";\n\nconst ndk = new NDKSvelte({\n    explicitRelayUrls: [\"wss://relay.f7z.io\"],\n});\n```\n\n```typescript\n// in your components\n<script lang=\"ts\">\n    const highlights = $ndk.storeSubscribe(\n        { kinds: [9802 as number] }, // Highlights\n        { closeOnEose: false },\n        NDKHighlight // Wrap all results in NDKHighlight\n    );\n\n    const nostrHighlightsAndReposts = $ndk.storeSubscribeWithReposts(\n        { kinds: [9802], \"#t\": [\"nostr\"] }, // filter for Highlights with Nostr\n        { kinds: [16], \"#k\": [\"9802\"], \"#t\": [\"nostr\"] }, // filter for Reposts of Highlights with Nostr\n        { closeOnEose: false },\n        NDKHighlight // Wrap all results in NDKHighlight\n    );\n    { closeOnEose: false }, NDKNote);\n\n    onDestroy(() => {\n        // Close the nostr subscription when the component is destroyed\n        highlights.unsubscribe();\n    });\n</script>\n\n<p>\n    {$highlights.length} highlights seen\n</p>\n\n<p>\n    {$nostrHighlightsAndReposts.length} nostr highlights (including reposts)\n</p>\n```\n\n## Reference Counting with ref/unref\n\nNDK-svelte introduces a reference counting mechanism through the ref and unref methods on the stores. This system is particularly useful for optimizing the lifecycle of subscriptions in components that might be frequently mounted and unmounted.\n\n### Benefits:\n\n- **Optimized Lifecycle**: Instead of starting a new subscription every time a component mounts, and ending it when it unmounts, you can reuse an existing subscription if another component is already using it.\n\n- **Resource Efficiency**: By preventing redundant subscriptions, you save both network bandwidth and processing power.\n\n- **Synchronization**: Ensures that multiple components referencing the same data are synchronized with a single data source.\n\n### How to use:\n\nWhenever you subscribe to a store in a component, call ref to increment the reference count:\n\n```typescript\n// lib/stores/highlightsStore.ts\nconst highlightsStore = $ndk.storeSubscribe(..., { autoStart: false } });\n\n// component 1\n<script>\nimport { highlightsStore } from '$stores/highlightsStore.ts';\nimport { onDestroy } from 'svelte';\nhighlightsStore.ref();\n\nonDestroy(() => {\n    highlightsStore.unref();\n});\n</script>\n\n{$highlightsStore.length} highlights seen\n```\n\nYou can mount this component as many times as you want, and the subscription will only be started once. When the last component unmounts, the subscription will be terminated.\n\n# Notes\n\nIf you are interested in NDK and Svelte you might want to checkout the\n[ndk-svelte-components](https://github.com/nostr-dev-kit/ndk-svelte-components) package\nwhich provides some components to make it easier to build nostr apps with Svelte.\n\n# Authors\n\n- [@pablof7z](https://njump.me/npub1l2vyh47mk2p0qlsku7hg0vn29faehy9hy34ygaclpn66ukqp3afqutajft)\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3589, 14],
		[3596, 35],
		[3603, 37],
		[3610, 158],
		[3617, 373],
		[3624, 33],
		[3631, 170],
		[3638, 23],
		[3645, 131],
		[3652, 16],
		[3659, 62],
		[3666, 135],
		[3673, 23],
		[3680, 116],
		[3687, 17],
		[3694, 116],
		[3701, 95],
		[3708, 42],
		[3715, 31],
		[3722, 37],
		[3729, 84],
		[3736, 119],
		[3743, 143],
		[3750, 73],
		[3757, 37],
		[3764, 126],
		[3771, 31],
		[3778, 79],
		[3785, 137],
		[3792, 47],
		[3799, 127],
		[3806, 224],
		[3813, 257],
		[3820, 236],
		[3827, 157],
		[3834, 238],
		[3841, 251],
		[3848, 207],
		[3855, 633],
		[3862, 390],
		[3869, 215],
		[3876, 179],
		[3883, 52],
		[3890, 155],
		[3897, 108],
		[3904, 394],
		[3911, 283],
		[3918, 215],
		[3925, 205],
		[3932, 245],
		[3939, 91],
		[3946, 331],
		[3953, 517],
		[3960, 304],
		[3967, 302],
		[3974, 277],
		[3981, 180],
		[3988, 140],
		[3995, 126],
		[4002, 285],
		[4009, 75],
		[4016, 126],
		[4023, 327],
		[4030, 210],
		[4037, 286],
		[4044, 233],
		[4051, 31],
		[4058, 212],
		[4065, 136],
		[4072, 65],
		[4079, 163],
		[4086, 29],
		[4093, 129],
		[4100, 49],
		[4107, 57],
		[4114, 96],
		[4121, 164],
		[4128, 160]
	]
}
