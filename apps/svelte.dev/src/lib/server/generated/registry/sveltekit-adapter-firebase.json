{
	"name": "sveltekit-adapter-firebase",
	"description": "Firebase adapter for SvelteKit apps.",
	"repo_url": "https://github.com/simonnepomuk/monorepo",
	"authors": [],
	"homepage": "https://github.com/simonnepomuk/monorepo#readme",
	"downloads": 14,
	"updated": "2022-12-03T17:35:40.369Z",
	"tags": ["adapter", "server"],
	"typescript": true,
	"version": "0.1.13",
	"last_rune_check_version": "0.1.13",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "sveltekit-adapter-firebase",
				"version": "0.1.13",
				"size": 681590
			}
		],
		"dependencies": [],
		"circular": []
	},
	"readme": "# sveltekit-adapter-firebase\n\n![npm](https://img.shields.io/npm/v/sveltekit-adapter-firebase?color=ff00)\n[![codecov](https://codecov.io/gh/simonnepomuk/monorepo/branch/main/graph/badge.svg?token=P2OL5DVRU9)](https://codecov.io/gh/simonnepomuk/monorepo)\n![CI](https://github.com/simonnepomuk/monorepo//actions/workflows/main.yml/badge.svg)  \n[Firebase](https://firebase.google.com/) adapter for\n[SvelteKit](https://github.com/sveltejs/kit).\n\n- SSR on\n  [Cloud Functions](https://firebase.google.com/docs/hosting/functions)\n- Supports CloudFunctions v2!\n  - [Concurrency](https://firebase.google.com/docs/functions/beta/manage-functions#allow_concurrent_requests)\n  - Easier [CORS](https://firebase.google.com/docs/functions/beta/http-events#configuring_cors_cross-origin_resource_sharing)\n  - Built on [CloudRun](https://cloud.google.com/run)\n  - New trigger types\n  - Up to 1hr timeout\n- Local production testing with\n  [Firebase Emulator](https://firebase.google.com/docs/emulator-suite)\n\n## Getting started\n\nIn your standard SvelteKit project:\n\n- `npm i -D sveltekit-adapter-firebase`\n- add adapter to `svelte.config.js`:\n\n```diff\n+import adapter from \"sveltekit-adapter-firebase\";\n\n/** @type {import('@sveltejs/kit').Config} */\nexport default {\n  kit: {\n+   adapter: adapter(),\n  },\n};\n```\n\n- add `firebase.json` next to build folder:\n\n```\n{\n  \"hosting\": {\n    \"public\": \"build\",\n    \"ignore\": [\n      \"**/.firebase/**\"\n    ],\n    \"cleanUrls\": true, //needed to serve prerendered pages without adding .html in the url\n    \"rewrites\": [\n      {\n        \"source\": \"**\",\n        \"function\": \"handler\",\n      }\n    ]\n  },\n  \"functions\": [\n    {\n      \"source\": \"build\",\n    }\n  ]\n}\n```\n\n## Configuration\n\nThe following snippet shows the default configuration.  \nV2 is used by default because it allows for concurrency which should drastically reduce costs and cold-starts.  \nFor further documentation on the functionOptions parameter visit the\nofficial [Firebase documentation](https://firebase.google.com/docs/functions/beta/reference/firebase-functions.https.httpsoptions.md)\n.\n\n```\n/** @type {import('@sveltejs/kit').Config} */\nexport default {\n  kit: {\n    adapter: adapter({\n      outDir: 'build',\n      functionName: 'handler', //needs to correspond to function hosting.rewrites[0].function property in firebase.json\n      nodeVersion: '16', // '16' or '14'\n      version: 'v1', // 'v1' or 'v2'\n      functionOptions: { // functionOptions are only available in v2\n        concurrency: 500 // max. 1000\n      }\n    }),\n  },\n};\n```\n\n### Region\n\nTo configure a region for the SvelteKit Server the `firebase.json` also needs to be adapted as follows  \n`svelte.config.js`\n\n```\n/** @type {import('@sveltejs/kit').Config} */\nexport default {\n  kit: {\n    adapter: adapter({\n      functionOptions: {\n        region: \"europe-west1\"\n      }\n    }),\n  },\n};\n```\n\n`firebase.json`\n\n```\n{\n  \"hosting\": {\n    \"public\": \"build\",\n    \"ignore\": [\n      \"**/.firebase/**\"\n    ],\n    \"cleanUrls\": true,\n    \"rewrites\": [\n      {\n        \"source\": \"**\",\n        \"function\": \"handler\",\n        \"region\": \"europe-west1\"\n      }\n    ]\n  },\n  \"functions\": [\n    {\n      \"source\": \"build\",\n    }\n  ]\n}\n```\n\n### Monorepo\n\nThrough the `outDir` configuration option the adapter should provide monorepo support (tested with Nx).  \nFor monorepos with a workspace package.json like Nx you would need some form of scripting to generate the correct\npackage.json with all dependencies.  \n`svelte.config.js`\n\n```\n/** @type {import('@sveltejs/kit').Config} */\nexport default {\n  kit: {\n    adapter: adapter({\n      outDir: \"../../dist/apps/frontend\"\n    }),\n  },\n};\n```\n\n`firebase.json` in project root:\n\n```\n{\n  \"hosting\": {\n    \"public\": \"dist/apps/frontend\",\n    \"ignore\": [\n      \"**/.firebase/**\"\n    ],\n    \"cleanUrls\": true,\n    \"rewrites\": [\n      {\n        \"source\": \"**\",\n        \"function\": \"handler\",\n      }\n    ]\n  },\n  \"functions\": [\n    //api is added here to present how a backend service might be integrated\n    {\n      \"codebase\": \"api\",\n      \"source\": \"dist/apps/api\",\n      \"runtime\": \"nodejs16\"\n    },\n    {\n      \"codebase\": \"frontend\",\n      \"source\": \"dist/apps/frontend\",\n    }\n  ]\n}\n```\n\n## Beware\n\n`functionOptions` are currently only available on v2 functions.\nIf `functionOptions` for v1 are in high demand this might get added later on (**open to PR**).\n\nV2 also requires the _Blaze_ subscription but offers a free tier of 2 million requests per month.\n\nFirebase Web Frameworks are currently not supported.\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3596, 25],
		[3603, 23],
		[3610, 27],
		[3617, 6],
		[3624, 26],
		[3631, 24],
		[3638, 28],
		[3645, 19],
		[3652, 17],
		[3659, 14],
		[3666, 39],
		[3673, 10],
		[3680, 29],
		[3687, 93],
		[3694, 72],
		[3701, 37],
		[3708, 11],
		[3715, 43],
		[3722, 3],
		[3729, 24],
		[3736, 7],
		[3743, 16],
		[3750, 10],
		[3757, 11],
		[3764, 60],
		[3771, 13],
		[3778, 12],
		[3785, 12],
		[3792, 13],
		[3799, 30],
		[3806, 16],
		[3813, 16],
		[3820, 22],
		[3827, 37],
		[3834, 22],
		[3841, 105],
		[3848, 13],
		[3855, 17],
		[3862, 20],
		[3869, 14],
		[3876, 10],
		[3883, 33],
		[3890, 70],
		[3897, 29],
		[3904, 67],
		[3911, 68],
		[3918, 17],
		[3925, 18],
		[3932, 25],
		[3939, 17],
		[3946, 9],
		[3953, 22],
		[3960, 8],
		[3967, 4],
		[3974, 6],
		[3981, 12],
		[3988, 6],
		[3995, 13],
		[4002, 9],
		[4009, 5],
		[4016, 27],
		[4023, 28],
		[4030, 8],
		[4037, 46],
		[4044, 63],
		[4051, 10],
		[4058, 92],
		[4065, 19],
		[4072, 16],
		[4079, 22],
		[4086, 12],
		[4093, 40],
		[4100, 37],
		[4107, 43],
		[4114, 14],
		[4121, 20],
		[4128, 13],
		[4135, 24]
	]
}
