{
	"name": "@jhubbardsf/svelte-inview",
	"description": "Detect element visibility in Svelte apps using Intersection Observer.",
	"repo_url": "",
	"authors": ["jhubbardsf"],
	"homepage": "https://github.com/maciekgrzybek/svelte-inview",
	"downloads": 13,
	"updated": "2024-07-18T01:17:14.380Z",
	"tags": ["miscellaneous"],
	"typescript": true,
	"version": "4.0.2",
	"svelte_range": "^3.0.0 || ^4.0.0",
	"last_rune_check_version": "4.0.2",
	"github_stars": 0,
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "@jhubbardsf/svelte-inview",
				"version": "4.0.2",
				"size": 45607
			}
		],
		"dependencies": [],
		"circular": []
	},
	"readme": "# Svelte Inview\n\nA Svelte action that monitors an element enters or leaves the viewport/parent element. Performant and efficient thanks to using [Intersection Observer](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API) under the hood. Can be used in multiple projects including lazy loading images, infinite scrolling, playing/pausing the video when in the viewport, tracking user behaviour firing link pre-fetching and animations and many many more.\n\n<img src=\"https://raw.githubusercontent.com/maciekgrzybek/svelte-inview/master/demo/static/demo.gif\" width=\"600px\" align=\"center\">\n\nüî• Check it out live [here](https://svelte-inview.netlify.app/)\n\nSupport if you like it ‚òï üî• <br />\n[![\"Buy Me A Coffee\"](https://www.buymeacoffee.com/assets/img/custom_images/yellow_img.png)](https://www.buymeacoffee.com/maciekgrzybek)\n\n## Why bother?\n\n- üëìÔ∏è Watch for any element that enters or leaves the viewport (or another wrapper/parent element).\n- üèéÔ∏è Thanks to using [Intersection Observer](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API), Svelte Inview is blazing fast and doesn't block the main thread.\n- üì¶Ô∏è Tiny, yet powerful (just ~2kb). No external dependencies (well, apart from Svelte).\n- üéõÔ∏è Use it in several different scenarios such as lazy loading images, infinite scrolling, playing/pausing the video when in the viewport, firing link pre-fetching, animations and many many more.\n- üê• Easy to use API.\n- ‚ÜïÔ∏è Detects the scrolling direction.\n\n## Installation\n\nThe only thing you need is Svelte itself.\n\nSvelte Inview is distributed via [npm](https://www.npmjs.com/package/svelte-inview).\n\n```sh\n$ yarn add svelte-inview\n# or\n$ npm install --save svelte-inview\n```\n\n> ‚ö†Ô∏è Modern browsers have the full support of Intersection Observer, but if you need to support ones like IE you can use this [simple polyfill](https://www.npmjs.com/package/intersection-observer). Just install it and import it in your project.\n\n## Usage\n\n### Basic Use Case\n\nThis is the most basic use case for `svelte-inview`. Just add the action to the element you want to track - `use:inview`. You can also pass other [configuration props](#props). You can see if the element is visible by checking the `inView` or from the inside of the callback method - `on:inview_change`.\n\n```html\n\n<script lang=\"ts\">\n  import { inview } from 'svelte-inview';\n\n  let isInView: boolean;\n  const options = {};\n</script>\n\n  <div\n    use:inview={options}\n    on:inview_change={(event) => {\n      const { inView, entry, scrollDirection, observer, node} = event.detail;\n      isInView = inView;\n    }}\n    on:inview_enter={(event) => {\n      const { inView, entry, scrollDirection, observer, node} = event.detail;\n      isInView = inView;\n    }}\n    on:inview_leave={(event) => {\n      const { inView, entry, scrollDirection, observer, node} = event.detail;\n      isInView = inView;\n    }}\n    on:inview_init={(event) => {\n      const { observer, node } = event.detail;\n    }}>{isInView ? 'Hey I am in the viewport' : 'Bye, Bye'}</div>\n```\n\n### Lazy Loading Images\n\nSvelte Inview lets you easily lazy load images. For a better UX we can pass a `rootMargin=\"50px\"` props, so the image will be loaded when scroll is 50px before the viewport. After it appears in the viewport, you don't want to observe it anymore, hence the `unobserveOnEnter` props set to true.\n\n```html\n<script lang=\"ts\">\n  import { inview } from 'svelte-inview';\n  import type { ObserverEventDetails, Options } from 'svelte-inview';\n\n  let isInView;\n  const options: Options = {\n    rootMargin: '50px',\n    unobserveOnEnter: true,\n  };\n\n  const handleChange = ({ detail }: CustomEvent<ObserverEventDetails>) =>\n    (isInView = detail.inView);\n</script>\n\n<div use:inview=\"{options}\" on:inview_change=\"{handleChange}\">\n  {#if isInView}\n  <img src=\"path/to/image.jpg\" />\n  {:else}\n  <div class=\"placeholder\" />\n  {/if}\n</div>\n```\n\n### Video Control\n\nYou can play/pause a video when it's in/out of the viewport. Simply pass correct methods in `on:inview_enter` and `on:inview_leave` callbacks.\n\n```html\n<script lang=\"ts\">\n  import { inview } from 'svelte-inview';\n  import type { ObserverEventDetails } from 'svelte-inview';\n\n  let isInView: boolean;\n  let videoRef: HTMLElement;\n</script>\n\n  <div\n    use:inview\n    on:inview_enter={() => videoRef.play()}\n    on:inview_leave={() => videoRef.pause()}\n  >\n    <video width=\"500\" controls bind:this={videoRef}>\n      <source src=\"path/to/video.mp4\" type=\"video/mp4\" />\n    </video>\n  </div>\n```\n\n### Animations\n\nYou can also add some cool animations when an element enters the viewport. To make sure the animation won't fire too soon you can pass a negative value to `rootMargin`. When `inView` is true, add an animation class to your target. Additionally, you can detect the scroll direction to make the animations even cooler!\n\n```html\n\n<script lang=\"ts\">\n  import { inview } from 'svelte-inview';\n  import type { ObserverEventDetails, ScrollDirection, Options } from 'svelte-inview';\n\n  let isInView: boolean;\n  let scrollDirection: ScrollDirection;\n  const options: Options = {\n    rootMargin: '-50px',\n    unobserveOnEnter: true,\n  };\n\n  const handleChange = ({ detail }: CustomEvent<ObserverEventDetails>) => {\n    isInView = detail.inView;\n    scrollDirection = detail.scrollDirection.vertical;\n  };\n</script>\n\n  <div use:inview={options} on:inview_change={handleChange}>\n    <div\n      class:animate={isInView}\n      class:animateFromBottom={scrollDirection === 'down'}\n      class:animateFromTop={scrollDirection === 'up'}>\n      Animate me!\n    </div>\n  </div>\n```\n\n### Important information about breaking changes in previous versions\n\n#### Version 4 introduces new names for events. Before they were `'change' | 'leave' | 'enter' | 'init'`. In version 4 they're changed to `'inview_change' | 'inview_leave' | 'inview_enter' | 'inview_init'`.\n\nThis change was needed to satisfy Typescript, as the package was messing up the default types coming from svelte typings.\nTo ensure backward compatibility, the original events names will still work for some time, but they won't be properly recognized by Typescript.\nTo sum up, this will still work, but TS won't be happy about it:\n\n```js\non:change={(event) => {\n  const { inView, entry, scrollDirection, observer, node} = event.detail;\n  isInView = inView;\n}}\n```\n\nTo make sure it works properly **and** satisfy TS you'll need to change it to this:\n\n```js\non:inview_change={(event) => {\n  const { inView, entry, scrollDirection, observer, node} = event.detail;\n  isInView = inView;\n}}\n```\n\n#### Version 2 was returning `observe` and `unobserve` methods on the events. In version 3 they were removed, and the `observer` and `node` are being returned instead. So if you used those methods before like this:\n\n```js\nevent.detail.observe(node);\n```\n\nYou'll need to change it to:\n\n```js\nevent.detail.observer.observe(node);\n```\n\n#### Version 1 was using an `Inview` component. In version 2 that was changed to `action` - API is easier to consume, plus the obsolete wrapper is not longer needed. If you still want to use the component, [check the documentation for version 1](https://github.com/maciekgrzybek/svelte-inview/tree/v-1.0.0).\n\n## API\n\n### Props\n\n| Name                     | Type                   | Default  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Required |\n| ------------------------ | ---------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |\n| options.root             | `HTMLElement`          | `window` | The element that is used as the viewport for checking visibility of the target. Must be the ancestor of the target.                                                                                                                                                                                                                                                                                                                                                         | `false`  |\n| options.rootMargin       | `string`               | `0px`    | Margin around the root element. Values similar to the CSS margin property, e.g. \"10px 20px 30px 40px\". Can also be a percentage. [See more](#usage-with-rootmargin).                                                                                                                                                                                                                                                                                                        | `false`  |\n| options.threshold        | `number` or `number[]` | `0`      | Either a single number or an array of numbers which indicate at what percentage of the target's visibility the observer's callback should be executed. If you only want to detect when visibility passes the 50% mark, you can use a value of 0.5. If you want the callback to run every time visibility passes another 25%, you would specify the array [0, 0.25, 0.5, 0.75, 1]. The default is 0 (meaning as soon as even one pixel is visible, the callback will be run) | `false`  |\n| options.unobserveOnEnter | `boolean`              | `false`  | If true, target element stops being observed after the first time it appears in the viewport. Can be used when you want to fire the callback only once.                                                                                                                                                                                                                                                                                                                     | `false`  |\n| on:inview_change         | `function`             | -        | Event fired every time the target element meets the specified threshold. Receives `event` object as an argument. Inside of `event.detail` you can find all the arguments specified [here](#observer-events-arguments).                                                                                                                                                                                                                                                      | `false`  |\n| on:inview_enter          | `function`             | -        | Event fired every time the target element enters the viewport. Receives `event` object as an argument. Inside of `event.detail` you can find all the arguments specified [here](#observer-events-arguments) .                                                                                                                                                                                                                                                               | `false`  |\n| on:inview_leave          | `function`             | -        | Event fired every time the target element leaves the viewport. Receives `event` object as an argument. Inside of `event.detail` you can find all the arguments specified [here](#observer-events-arguments) .                                                                                                                                                                                                                                                               | `false`  |\n| on:inview_init           | `function`             | -        | Event fired on action initialization, before the observer starts observing the element. Receives lifecycle arguments specified [here](#lifecycle-events-arguments)                                                                                                                                                                                                                                                                                                          | `false`  |\n\n### Observer events arguments\n\n| Name                       | Type                        | Description                                                                                                                                                                                                 |\n| -------------------------- | --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| inView                     | `boolean`                   | Visibility state of the target element. If it's `true`, target passed at least the value of the `threshold` props.                                                                                          |\n| entry                      | `IntersectionObserverEntry` | [Intersection Observer entry object](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry) generated every time when IO callback is fired.                                            |\n| scrollDirection.vertical   | `up` or `down`              | Vertical scrolling direction.                                                                                                                                                                               |\n| scrollDirection.horizontal | `left` or `right`           | Horizontal scrolling direction.                                                                                                                                                                             |\n| node                       | `HTMLElement`               | Element that is being observed                                                                                                                                                                              |\n| observer                   | `IntersectionObserver`      | [Intersection Observer instance](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver) for the observed element. Among others, it allows to \"turn off\" the observer at the very beginning. |\n\n### Lifecycle events arguments\n\n| Name     | Type                   | Description                                                                                                                                                                                                 |\n| -------- | ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| node     | `HTMLElement`          | Element that is being observed                                                                                                                                                                              |\n| observer | `IntersectionObserver` | [Intersection Observer instance](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver) for the observed element. Among others, it allows to \"turn off\" the observer at the very beginning. |\n\n## Additional Info\n\n### Usage with rootMargin\n\nIf you want to increase or decrease the area of the root, just pass the `rootMargin`. On the image below you can see the blue area being the `root`. It means that every time, the target element will enter or leave that area (or meet the specified threshold), a callback will be fired.\n\n![Usage of rootMargin](https://raw.githubusercontent.com/maciekgrzybek/svelte-inview/master/demo/static/rootMargin.jpg)\n\n## License\n\nDistributed under the MIT License. See [LICENSE](./license.md) for more information.\n\n## Contact\n\nMaciek Grzybek - [@grzybek_maciek](https://twitter.com/grzybek_maciek) - maciekgrzybek1@gmail.com - [www.maciekgrzybek.dev](https://www.maciekgrzybek.dev)\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3848, 66],
		[3855, 10],
		[3862, 5],
		[3869, 8],
		[3876, 4],
		[3883, 18],
		[3890, 20],
		[3897, 18],
		[3904, 10],
		[3911, 13],
		[3918, 22],
		[3925, 36],
		[3932, 24],
		[3939, 15],
		[3946, 8],
		[3953, 8],
		[3960, 6],
		[3967, 4],
		[3974, 5],
		[3981, 11],
		[3988, 4],
		[3995, 8],
		[4002, 4],
		[4009, 2],
		[4016, 4],
		[4023, 3],
		[4030, 4],
		[4037, 3],
		[4044, 7],
		[4051, 3],
		[4058, 1],
		[4065, 1],
		[4072, 3],
		[4079, 3],
		[4086, 3],
		[4093, 2],
		[4107, 26],
		[4114, 13],
		[4121, 11],
		[4128, 14]
	]
}
