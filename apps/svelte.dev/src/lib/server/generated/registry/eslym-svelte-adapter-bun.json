{
	"name": "@eslym/svelte-adapter-bun",
	"description": "Generate standalone Bun.js server for SvelteKit apps.",
	"repo_url": "https://github.com/eslym/svelte-adapter-bun",
	"authors": ["0nepeop1e"],
	"homepage": "https://github.com/eslym/svelte-adapter-bun#readme",
	"downloads": 64,
	"updated": "2024-05-16T17:57:55.657Z",
	"tags": ["adapter"],
	"github_stars": 3,
	"typescript": true,
	"version": "0.5.9",
	"kit_range": "^1.30.4",
	"last_rune_check_version": "0.5.9",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "@eslym/svelte-adapter-bun",
				"version": "0.5.9",
				"size": 42834
			},
			{
				"name": "@rollup/plugin-commonjs",
				"version": "25.0.8",
				"size": 258175
			},
			{
				"name": "glob",
				"version": "8.1.0",
				"size": 56156
			},
			{
				"name": "once",
				"version": "1.4.0"
			},
			{
				"name": "wrappy",
				"version": "1.0.2"
			},
			{
				"name": "inflight",
				"version": "1.0.6"
			},
			{
				"name": "inherits",
				"version": "2.0.4",
				"size": 3958
			},
			{
				"name": "minimatch",
				"version": "5.1.6",
				"size": 38919
			},
			{
				"name": "brace-expansion",
				"version": "2.0.1",
				"size": 11486
			},
			{
				"name": "balanced-match",
				"version": "1.0.2",
				"size": 6939
			},
			{
				"name": "fs.realpath",
				"version": "1.0.0"
			},
			{
				"name": "commondir",
				"version": "1.0.1"
			},
			{
				"name": "is-reference",
				"version": "1.2.1",
				"size": 6374
			},
			{
				"name": "@types/estree",
				"version": "1.0.7",
				"size": 26147
			},
			{
				"name": "magic-string",
				"version": "0.30.17",
				"size": 467464
			},
			{
				"name": "@jridgewell/sourcemap-codec",
				"version": "1.5.0",
				"size": 112815
			},
			{
				"name": "estree-walker",
				"version": "2.0.2",
				"size": 50243
			},
			{
				"name": "@rollup/pluginutils",
				"version": "5.1.4",
				"size": 58354
			},
			{
				"name": "picomatch",
				"version": "4.0.2",
				"size": 85237
			},
			{
				"name": "@rollup/plugin-json",
				"version": "6.1.0",
				"size": 10683
			},
			{
				"name": "@rollup/plugin-node-resolve",
				"version": "15.3.1",
				"size": 154449
			},
			{
				"name": "resolve",
				"version": "1.22.10",
				"size": 145619
			},
			{
				"name": "is-core-module",
				"version": "2.16.1",
				"size": 33475
			},
			{
				"name": "hasown",
				"version": "2.0.2",
				"size": 8765
			},
			{
				"name": "function-bind",
				"version": "1.1.2",
				"size": 31427
			},
			{
				"name": "path-parse",
				"version": "1.0.7",
				"size": 4511
			},
			{
				"name": "supports-preserve-symlinks-flag",
				"version": "1.0.0",
				"size": 9178
			},
			{
				"name": "deepmerge",
				"version": "4.3.1",
				"size": 31157
			},
			{
				"name": "is-module",
				"version": "1.0.0"
			},
			{
				"name": "@types/resolve",
				"version": "1.20.2",
				"size": 9885
			},
			{
				"name": "rollup",
				"version": "4.40.1",
				"size": 2727114
			},
			{
				"name": "tiny-glob",
				"version": "0.2.9",
				"size": 12092
			},
			{
				"name": "globalyzer",
				"version": "0.1.0",
				"size": 11416
			},
			{
				"name": "globrex",
				"version": "0.1.2",
				"size": 14164
			}
		],
		"dependencies": [
			[0, 1],
			[1, 2],
			[2, 3],
			[3, 4],
			[2, 5],
			[5, 3],
			[5, 4],
			[2, 6],
			[2, 7],
			[7, 8],
			[8, 9],
			[2, 10],
			[1, 11],
			[1, 12],
			[12, 13],
			[1, 14],
			[14, 15],
			[1, 16],
			[1, 17],
			[17, 13],
			[17, 16],
			[17, 18],
			[0, 19],
			[19, 17],
			[0, 20],
			[20, 21],
			[21, 22],
			[22, 23],
			[23, 24],
			[21, 25],
			[21, 26],
			[20, 27],
			[20, 28],
			[20, 29],
			[20, 17],
			[0, 30],
			[30, 13],
			[0, 31],
			[31, 32],
			[31, 33]
		],
		"circular": []
	},
	"readme": "# @eslym/svelte-adapter-bun\n\nA fork from [svelte-adapter-bun](https://github.com/gornostay25/svelte-adapter-bun)\n\n[Adapter](https://kit.svelte.dev/docs/adapters) for SvelteKit apps that generates a standalone [Bun](https://github.com/oven-sh/bun) server.\n\n## :zap: Usage\n\nInstall with `bun add -d @eslym/svelte-adapter-bun`, then add the adapter to your `svelte.config.js`:\n\n```js\n// svelte.config.js\nimport adapter from \"@eslym/svelte-adapter-bun\";\n\nexport default {\n  kit: {\n    adapter: adapter(),\n  },\n};\n```\n\nAfter building the server (`vite build`), use the following command to start:\n\n```\n# go to build directory\ncd build/\n\n# run Bun\nbun run start\n```\n\n## :gear: Options\n\nThe adapter can be configured with various options:\n\n```js\n// svelte.config.js\nimport adapter from \"@eslym/svelte-adapter-bun\";\nexport default {\n  kit: {\n    adapter: adapter({\n      out: \"build\",\n      assets: true,\n      envPrefix: \"MY_CUSTOM_\",\n      development: true,\n      // precompress: true,\n      precompress: {\n        brotli: true,\n        gzip: true,\n        files: [\"htm\", \"html\"],\n      },\n      dynamic_origin: true,\n      xff_depth: 1,\n    }),\n  },\n};\n```\n\n### out\n\nThe directory to build the server to. It defaults to `build` — i.e. `bun run start` would start the server locally after it has been created.\n\n### assets\n\nBrowse a static assets. Default: `true`\n\n- [x] Support [HTTP range requests](https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests)\n\n### precompress\n\nEnables precompressing using gzip and brotli for assets and prerendered pages. It defaults to `false`.\n\n#### brotli\n\nEnable brotli precompressing. It defaults to `false`.\n\n#### gzip\n\nEnable gzip precompressing. It defaults to `false`.\n\n#### files\n\nfile extensions to compress.It defaults to `['html','js','json','css','svg','xml','wasm']`.\n\n### envPrefix\n\nIf you need to change the name of the environment variables used to configure the deployment (for example, to deconflict with environment variables you don't control), you can specify a prefix:\n\n```js\nenvPrefix: \"MY_CUSTOM_\";\n```\n\n```\nMY_CUSTOM_HOST=127.0.0.1 \\\nMY_CUSTOM_PORT=4000 \\\nMY_CUSTOM_ORIGIN=https://my.site \\\nbun build/index.js\n```\n\n### development\n\nThis enables bun's error page. Default: `false`\n\n### dynamic_origin\n\nIf enabled use `PROTOCOL_HEADER` `HOST_HEADER` like origin. Default: `false`\n\n### xff_depth\n\nThe default value of XFF_DEPTH if environment is not set. Default: `1`\n\n## :spider_web: WebSocket Server\n\nhttps://bun.sh/docs/api/websockets\n\n```js\n// hooks.server.js\n\n/** @type {import(\"svelte-adapter-bun\").WebSocketHandler} */\nexport const handleWebsocket = {\n  open(ws) {\n    console.log(\"WebSocket opened\");\n    ws.send(\"Slava Ukraїni\");\n  },\n  /**\n   * @param {Request} request\n   * @param {Function} upgrade\n   */\n  upgrade(request, upgrade) {\n    const url = new URL(request.url);\n    if (url.pathname.startsWith(\"/ws\")) {\n      return upgrade(request);\n    }\n  },\n};\n```\n\n## Polyfills\n\nIf you need to use polyfills in your app, you can add them to the [`src/polyfills.js`](src/polyfills.js) file:\n\n```js\nclass Polifill {\n  constructor() {\n    ...\n  }\n}\n\nconst globals = {\n  Polifill,\n};\n```\n\n## :desktop_computer: Environment variables\n\n> Bun automatically reads configuration from `.env.local`, `.env.development` and `.env`\n\n### `PORT` and `HOST`\n\nBy default, the server will accept connections on `0.0.0.0` using port 3000. These can be customized with the `PORT` and `HOST` environment variables:\n\n```\nHOST=127.0.0.1 PORT=4000 bun build/index.js\n```\n\n### `ORIGIN`, `PROTOCOL_HEADER` and `HOST_HEADER`\n\nHTTP doesn't give SvelteKit a reliable way to know the URL that is currently being requested. The simplest way to tell SvelteKit where the app is being served is to set the `ORIGIN` environment variable:\n\n```\nORIGIN=https://my.site bun build/index.js\n```\n\nWith this, a request for the `/stuff` pathname will correctly resolve to `https://my.site/stuff`. Alternatively, you can specify headers that tell SvelteKit about the request protocol and host, from which it can construct the origin URL:\n\n```\nPROTOCOL_HEADER=x-forwarded-proto HOST_HEADER=x-forwarded-host bun build/index.js\n```\n\n> [`x-forwarded-proto`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto) and [`x-forwarded-host`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host) are de facto standard headers that forward the original protocol and host if you're using a reverse proxy (think load balancers and CDNs). You should only set these variables if your server is behind a trusted reverse proxy; otherwise, it'd be possible for clients to spoof these headers.\n\n### `ADDRESS_HEADER` and `XFF_DEPTH`\n\nThe [RequestEvent](https://kit.svelte.dev/docs/types#additional-types-requestevent) object passed to hooks and endpoints includes an `event.clientAddress` property representing the client's IP address. If your server is behind one or more proxies (such as a load balancer), you can get an IP address from headers, so we need to specify an `ADDRESS_HEADER` to read the address from:\n\n```\nADDRESS_HEADER=True-Client-IP bun build/index.js\n```\n\n> Headers can easily be spoofed. As with `PROTOCOL_HEADER` and `HOST_HEADER`, you should [know what you're doing](https://adam-p.ca/blog/2022/03/x-forwarded-for/) before setting these.\n> If the `ADDRESS_HEADER` is `X-Forwarded-For`, the header value will contain a comma-separated list of IP addresses. The `XFF_DEPTH` environment variable should specify how many trusted proxies sit in front of your server. E.g. if there are three trusted proxies, proxy 3 will forward the addresses of the original connection and the first two proxies:\n\n```\n<client address>, <proxy 1 address>, <proxy 2 address>\n```\n\nSome guides will tell you to read the left-most address, but this leaves you [vulnerable to spoofing](https://adam-p.ca/blog/2022/03/x-forwarded-for/):\n\n```\n<spoofed address>, <client address>, <proxy 1 address>, <proxy 2 address>\n```\n\nInstead, we read from the _right_, accounting for the number of trusted proxies. In this case, we would use `XFF_DEPTH=3`.\n\n> If you need to read the left-most address instead (and don't care about spoofing) — for example, to offer a geolocation service, where it's more important for the IP address to be _real_ than _trusted_, you can do so by inspecting the `x-forwarded-for` header within your app.\n\n## License\n\n[MIT](LICENSE) © [0nepeop1e](https://github.com/eslym)\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3715, 255],
		[3722, 31],
		[3729, 6],
		[3736, 82],
		[3743, 22],
		[3750, 9],
		[3757, 19],
		[3764, 12],
		[3771, 18],
		[3778, 8],
		[3785, 70],
		[3792, 49],
		[3799, 20],
		[3806, 28],
		[3813, 111],
		[3820, 27],
		[3827, 22],
		[3834, 58],
		[3841, 17],
		[3848, 9],
		[3855, 12],
		[3862, 31],
		[3869, 39],
		[3876, 69],
		[3883, 31],
		[3890, 75],
		[3897, 74],
		[3904, 48],
		[3911, 20],
		[3918, 30],
		[3925, 34],
		[3932, 24],
		[3939, 33],
		[3946, 33],
		[3953, 21],
		[3960, 35],
		[3967, 26],
		[3974, 22],
		[3981, 46],
		[3988, 31],
		[3995, 30],
		[4002, 34],
		[4009, 14],
		[4016, 29],
		[4023, 38],
		[4030, 41],
		[4037, 34],
		[4044, 64],
		[4051, 67],
		[4058, 46],
		[4065, 101],
		[4072, 99],
		[4079, 48],
		[4086, 53],
		[4093, 46],
		[4100, 35],
		[4107, 57],
		[4114, 64],
		[4121, 40],
		[4128, 48]
	],
	"esm": true,
	"cjs": false
}
