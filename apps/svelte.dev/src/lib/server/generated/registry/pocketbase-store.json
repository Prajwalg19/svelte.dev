{
	"name": "pocketbase-store",
	"description": "Create Svelte stores for PocketBase collections and records.",
	"repo_url": "https://github.com/lixelv/pocketbase-store",
	"authors": ["lixelv"],
	"homepage": "https://github.com/lixelv/pocketbase-store",
	"downloads": 91,
	"updated": "2025-04-09T19:20:54.340Z",
	"tags": ["miscellaneous"],
	"github_stars": 2,
	"typescript": true,
	"version": "0.2.4",
	"svelte_range": "*",
	"kit_range": "^2.0.0",
	"last_rune_check_version": "0.2.4",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "pocketbase-store",
				"version": "0.2.4",
				"size": 29042
			},
			{
				"name": "pocketbase",
				"version": "0.21.5",
				"size": 1486326
			}
		],
		"dependencies": [[0, 1]],
		"circular": []
	},
	"readme": "# pocketbase-store\n\n## Overview\n\nThis library was created to make using pocketbase **realtime data** in svelte apps easier, by providing reactive stores for collections and individual records.\n\n## Installation\n\n```bash\nnpm install pocketbase-store\n```\n\n## Usage\n\nHere is example of basic usage for storing some words and sorting them by name and created fields:\n\n```svelte\n<script lang=\"ts\">\n\timport PocketBase from 'pocketbase-store';\n\n\ttype TestItem = {\n\t\tid: string;\n\t\tcreated: string;\n\t\tupdated: string;\n\t\tcollectionId: string;\n\t\tcollectionName: string;\n\t\tname: string;\n\t};\n\n\tconst pb = new PocketBase('https://your-pocketbase-url.com');\n\tconst testStore = pb.collection('example').store<TestItem>({ sort: '-name,created' });\n\n\tlet value = '';\n</script>\n\n<form\n\ton:submit|preventDefault={() => {\n\t\ttestStore.create({ name: value });\n\t\tvalue = '';\n\t}}\n>\n\t<input type=\"text\" bind:value />\n\t<button type=\"submit\">Add</button>\n</form>\n{#each $testStore as item (item.id)}\n\t{item.name}\n\t<button on:click={() => testStore.delete(item)}>Delete</button>\n\t<br />\n{/each}\n```\n\n## Elements\n\n### Collection Store\n\n#### Overview\n\nThis `CollectionStore` class is wrapped in `pb.collection('test').store()`, here is basic usage:\n\n```svelte\n<script lang=\"ts\">\n\timport PocketBase from 'pocketbase-store';\n\n\tconst pb = new PocketBase('https://your-pocketbase-url.com');\n\tconst collectionStore = pb.collection('example').store();\n</script>\n\n{#each $collectionStore as item (item.id)}\n\t<!-- ... -->\n{/each}\n```\n\nAnd data will refresh automatically when it changes, thanks for realtime data support in pocketbase!\n\n#### Generics\n\nAlso you can use basic generics in stores, the example is in [Usage](#usage) section:\n\n#### Additional methods\n\nI've added some additional methods in this store:\n\n- `getData`: Used for getting data from pocketbase. Returns nothing. By default when `autoSubGetData = true` lunches when initialized, method is async.\n- `subscribeOnPocketBase`: Used for subscribing on pocketbase. Returns nothing. By default when `autoSubGetData = true` lunches when initialized, method is async.\n\n- `create`: Used for changing data in the store first, and after in pocketbase. Returns nothing.\n- `update_`: Used for updating data in the store first, and after in pocketbase. Returns nothing. Also named `update_` because `update` is already used in `writable`, sadly :(.\n- `delete`: Used for deleting data in the store first, and after in pocketbase. Returns nothing.\n\nAll this methods are async methods, also they changes the store much faster, then waiting for response from pocketbase.\n\n#### Writible\n\nCollection Store is a class, that implements `writable` interface. That means, that you can change data in store. But sadly this changes won't be reflected in pocketbase, I want to fix this, in the future, this is planed. Now use `update_` method instead.\n\n#### Options\n\nYou can add 2 additional arguments to `store` method:\n\n- `options`: `CollectionSendOptions`, you can find it in [Types](#types) section.\n- `initialValue`: `T[]`, it's an array of objects that will be stored in the store, instead of calling `getFullList` method from pocketbase.\n- `autoSubGetData`: `boolean`, if you want to manage getting data and subscribing on pocketbase by methods `getData` and `subscribeOnPocketBase`, set it to `false`, by default it's `true`.\n\n#### Types\n\n```ts\ntype CollectionSendOptions = {\n\texpand?: string; // string like 'name,created', more info in pocketbase admin ui docs\n\tfields?: string; // string like 'name,created' for sorting witch fields to send\n\tfilter?: string; // string like 'name = \"test\"', more info here: https://pocketbase.io/docs/api-rules-and-filters/\n\tsort?: string; // string like '-name,created', more info in pocketbase admin ui docs\n\texpirationTime?: number; // time in milliseconds then data in cache will be deleted (by default 4 seconds)\n\tautoSubGetData?: boolean; // if you want to manage getting data and subscribing on pocketbase by methods `getData` and `subscribeOnPocketBase`, set it to `false`, by default it's `true`\n};\n\n// Every T generic type better to have all Record fields\ntype Record = {\n\tid: string;\n\tcreated: string;\n\tupdated: string;\n\tcollectionId: string;\n\tcollectionName: string;\n};\n```\n\n### Item Store\n\n#### Overview\n\nThis `ItemStore` class is wrapped in `pb.collection('test').storeItem()`, here is basic usage:\n\n```svelte\n<script lang=\"ts\">\n\timport PocketBase from 'pocketbase-store';\n\n\tconst pb = new PocketBase('https://your-pocketbase-url.com');\n\tconst itemStore = pb.collection('example').storeItem('RECORD_ID');\n</script>\n\n<input type=\"text\" bind:value={$itemStore.name} />\n\n<button on:click={async () => await $itemStore.send()}>Send</button>\n```\n\n> [!NOTE]\n> When you write something in input, it will be changed in store, and on calling `$itemStore.send()`, it will be sent to pocketbase.\n\n#### Generics\n\nHere is supported generics, all I can say.\n\n#### Additional methods\n\nI've added some additional methods in this store:\n\n- `getData`: Used for getting data from pocketbase. Returns nothing. By default when `autoSubGetData = true` lunches when initialized, method is async.\n- `subscribeOnPocketBase`: Used for subscribing on pocketbase. Returns nothing. By default when `autoSubGetData = true` lunches when initialized, method is async.\n\n- `send`: Used for refreshing data in the pocketbase.\n\n#### Options\n\nWhen creating new ItemStore, you can add next arguments:\n\n- `initialValue (required)`: `T | string`, used for initializing new item, can hold string like `'RECORD_ID'` and object like `{ id: 'RECORD_ID', collectionId: 'COLLECTION_ID', collectionName: 'COLLECTION_NAME', etc.}`.\n- `options`: `ItemSendOptions`, you can find it in [Types](#types) section.\n\n#### Types\n\n```ts\ntype ItemSendOptions = {\n\texpand?: string; // string like 'name,created', more info in pocketbase admin ui docs\n\tfields?: string; // string like 'name,created' for sorting witch fields to send\n\texpirationTime?: number; // time in milliseconds then data in cache will be deleted (by default 4 seconds)\n\tautoSubGetData?: boolean; // if you want to manage getting data and subscribing on pocketbase by methods `getData` and `subscribeOnPocketBase`, set it to `false`, by default it's `true`\n};\n```\n\n## Contributing and Releasing\n\n### Development\n\n1. Fork the repository\n2. Make your changes\n3. Create a pull request\n\n### Publishing a New Version\n\nThis library uses GitHub Actions for automated publishing to npm. To release a new version:\n\n1. Update the version number in `package.json`\n2. Commit your changes: `git commit -am \"Bump version to x.y.z\"`\n3. Create a new tag: `git tag vx.y.z` (where x.y.z is the version number)\n4. Push the changes and tags: `git push && git push --tags`\n\nThe GitHub Actions workflow will automatically:\n- Build and test the package\n- Publish to npm when a new tag is pushed\n\nNote: You need to have an NPM_TOKEN secret set up in your GitHub repository settings for the automated publishing to work.\n\n## LICENSE\n\nMIT License, do what you want with it, this is your responsibility.\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3890, 166],
		[3897, 127],
		[3904, 19],
		[3911, 76],
		[3918, 8],
		[3925, 4],
		[3932, 67],
		[3939, 18],
		[3946, 5],
		[3953, 1],
		[3960, 2],
		[3967, 72],
		[3974, 141],
		[3981, 200],
		[3988, 24],
		[3995, 7],
		[4002, 6],
		[4009, 9],
		[4016, 30],
		[4023, 3],
		[4030, 5],
		[4037, 24],
		[4044, 13],
		[4051, 6],
		[4065, 1],
		[4072, 8],
		[4100, 13],
		[4107, 121],
		[4114, 91],
		[4121, 15],
		[4128, 11]
	],
	"esm": true,
	"cjs": false
}
