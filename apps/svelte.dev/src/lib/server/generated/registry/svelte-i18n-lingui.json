{
	"name": "svelte-i18n-lingui",
	"description": "Integrates Lingui for i18n in Svelte/SvelteKit projects.",
	"repo_url": "https://github.com/HenryLie/svelte-i18n-lingui",
	"authors": ["henrylie"],
	"homepage": "https://github.com/HenryLie/svelte-i18n-lingui#readme",
	"downloads": 901,
	"updated": "2025-02-20T16:18:15.146Z",
	"tags": ["integration"],
	"github_stars": 30,
	"typescript": true,
	"version": "0.2.2",
	"svelte_range": ">=4",
	"kit_range": "^2.5.27",
	"last_rune_check_version": "0.2.2",
	"dependency_tree": {
		"rootIndex": 0,
		"packages": [
			{
				"name": "svelte-i18n-lingui",
				"version": "0.2.2",
				"size": 38001
			},
			{
				"name": "@typescript-eslint/typescript-estree",
				"version": "8.31.1",
				"size": 411782
			},
			{
				"name": "debug",
				"version": "4.4.0",
				"size": 42798
			},
			{
				"name": "ms",
				"version": "2.1.3",
				"size": 6721
			},
			{
				"name": "semver",
				"version": "7.7.1",
				"size": 96674
			},
			{
				"name": "is-glob",
				"version": "4.0.3",
				"size": 13609
			},
			{
				"name": "is-extglob",
				"version": "2.1.1"
			},
			{
				"name": "fast-glob",
				"version": "3.3.3",
				"size": 98396
			},
			{
				"name": "@nodelib/fs.stat",
				"version": "2.0.5",
				"size": 11845
			},
			{
				"name": "@nodelib/fs.walk",
				"version": "1.2.8",
				"size": 26377
			},
			{
				"name": "fastq",
				"version": "1.19.1",
				"size": 45922
			},
			{
				"name": "reusify",
				"version": "1.1.0",
				"size": 11696
			},
			{
				"name": "@nodelib/fs.scandir",
				"version": "2.1.5",
				"size": 22155
			},
			{
				"name": "run-parallel",
				"version": "1.2.0",
				"size": 6563
			},
			{
				"name": "queue-microtask",
				"version": "1.2.3",
				"size": 8367
			},
			{
				"name": "glob-parent",
				"version": "5.1.2",
				"size": 12134
			},
			{
				"name": "merge2",
				"version": "1.4.1",
				"size": 8897
			},
			{
				"name": "micromatch",
				"version": "4.0.8",
				"size": 56599
			},
			{
				"name": "braces",
				"version": "3.0.3",
				"size": 44635
			},
			{
				"name": "fill-range",
				"version": "7.1.1",
				"size": 16743
			},
			{
				"name": "to-regex-range",
				"version": "5.0.1",
				"size": 22939
			},
			{
				"name": "is-number",
				"version": "7.0.0",
				"size": 9615
			},
			{
				"name": "picomatch",
				"version": "2.3.1",
				"size": 89952
			},
			{
				"name": "minimatch",
				"version": "9.0.5",
				"size": 435003
			},
			{
				"name": "brace-expansion",
				"version": "2.0.1",
				"size": 11486
			},
			{
				"name": "balanced-match",
				"version": "1.0.2",
				"size": 6939
			},
			{
				"name": "ts-api-utils",
				"version": "2.1.0",
				"size": 356154
			},
			{
				"name": "@typescript-eslint/types",
				"version": "8.31.1",
				"size": 171287
			},
			{
				"name": "@typescript-eslint/visitor-keys",
				"version": "8.31.1",
				"size": 13994
			},
			{
				"name": "eslint-visitor-keys",
				"version": "4.2.0",
				"size": 36136
			},
			{
				"name": "estree-walker-ts",
				"version": "1.1.0",
				"size": 51105
			},
			{
				"name": "js-sha256",
				"version": "0.10.1",
				"size": 38884
			}
		],
		"dependencies": [
			[0, 1],
			[1, 2],
			[2, 3],
			[1, 4],
			[1, 5],
			[5, 6],
			[1, 7],
			[7, 8],
			[7, 9],
			[9, 10],
			[10, 11],
			[9, 12],
			[12, 13],
			[13, 14],
			[12, 8],
			[7, 15],
			[15, 5],
			[7, 16],
			[7, 17],
			[17, 18],
			[18, 19],
			[19, 20],
			[20, 21],
			[17, 22],
			[1, 23],
			[23, 24],
			[24, 25],
			[1, 26],
			[1, 27],
			[1, 28],
			[28, 29],
			[28, 27],
			[0, 30],
			[0, 31]
		],
		"circular": []
	},
	"readme": "# svelte-i18n-lingui\n\nAdd i18n to Svelte/Sveltekit projects using [Lingui](https://lingui.dev/), with gettext-style message as catalog id.\n\n## Features\n\n- **Message as catalog id** - see your base language text in your code instead of a manually generated ID\n- **Message extraction** - plain strings in the code consumed or marked by the library is automatically extracted into a catalog with a simple cli command\n- **Shortened id for compiled catalog** - use a replacement short message hash instead of the original message in the compiled catalog to reduce the catalog size, and subsequently download size.\n- **Simple api with stores** - utilizes svelte stores to subscribe to locale changes and translate text in real time.\n- **Clean syntax** - use tagged template literals for simple translations, e.g. `` $t`Hello world` ``\n\n## Why this library?\n\n<details>\n<summary>Motivations</summary>\n\nI created this package since I couldn't find any svelte i18n library that allows me to add i18n with a gettext-style approach, which works by:\n\n- Writing the base language text as-is in the codebase, and mark them for extraction.\n- A cli command will scan the codebase and extract the marked messages as a message catalog, usually .po files.\n- We add a translations to the po files for every supported locale.\n- Run another cli command to compile the catalog files into highly optimized message dictionary to be loaded during runtime.\n- Use the provided functions to translate the message during runtime, reacting to the user's language preference updates and updating the text on the UI in real time.\n\nMost of the i18n libraries for Svelte works by manually defining the message catalog, adding a short descriptive key name manually, and then use the keys in the code. I think this comes with a few drawbacks:\n\n- We can't see the real text in the codebase, only a short summary of it in the form of the keys. This makes the code feel detached from the rendered result.\n- We need to decide on the key names by ourselves depending on the context, which adds an additional mental burden every time we add text.\n- The manual name we pick for the key are created by us, so it can be inconsistent when there are many people working on the project unless there is a very strict naming rule enforced in the team.\n- To keep the name descriptive for the text, we might need to pick a long key name, which adds to the catalog's file size that the users need to download.\n- When we write the keys manually, it could be hard to track for duplicate keys defined more than once in the catalog. This is especially true when the messages are grouped based on the page where they are used.\n\nWhile looking for i18n libraries that support this requirement, I found [Lingui](https://lingui.dev/) which seems to fit this need, and it supports usage in both React and plain JS. While the plain JS version seem to work, I found some drawback when implementing them to my Svelte projects:\n\n- The plain syntax without macro usage is quite verbose.\n- It provides a macro that work for JS files to make the syntax much more succinct, but it doesn't work with modern Svelte projects that uses Vite as the bundler, since both Vite and Sveltekit expects libraries in ESM format. Lingui's macro depends on `babel-plugin-macros` to work, which doesn't seem to work well with Vite.\n- Svelte and Vite don't use Babel to transpile code, so even if `babel-plugin-macros` work we'll need to add an extra tool to do extra transpilation when compiling.\n- Lingui doesn't come with an extractor for Svelte files yet.\n- The i18n function provided is not reactive since it's just a plain js function.\n\nDue to the above challenges, I decided to build this library to replicate Lingui's macro functionality on Svelte projects. The basic syntax looks similar to Lingui's macro version, but there are some changes added on top to make it reactive on Svelte. This library also comes with an extractor for both Svelte files and js/ts files to support its customized syntax.\n\n</details>\n\n## How it works\n\nMessages that should be translated to different languages need to be marked for extraction. There are two ways to do this:\n\n- **Automatic:** when you use the provided store or function to translate the message during runtime, you are also marking that message for extraction.\n- **Manual:** sometimes we want to define a message somewhere in the code (usually js/ts files) to be translated at a later time, since the user might update their preferred language on the fly. To accommodate this, a special function is provided to mark the messages for extraction.\n\n## Installation\n\nFirstly, install this package along with the Lingui packages.\n\n```sh\nnpm install --save @lingui/core svelte-i18n-lingui\nnpm install --save-dev @lingui/cli\n```\n\n### Configure Lingui\n\nAfter the packages are installed, create a `lingui.config.ts` (or js depending on your project config) and add a basic configuration. An example of a simple project with English base language and Japanese localization:\n\n```ts\nimport { jstsExtractor, svelteExtractor } from 'svelte-i18n-lingui/extractor';\n\nexport default {\n\tlocales: ['en', 'ja'],\n\tsourceLocale: 'en',\n\tcatalogs: [\n\t\t{\n\t\t\tpath: 'src/locales/{locale}',\n\t\t\tinclude: ['src/lib', 'src/routes'],\n\t\t},\n\t],\n\textractors: [jstsExtractor, svelteExtractor],\n};\n```\n\nHere we are using `svelte-i18n-lingui`'s extractors to allow for extracting messages with customized tags from both svelte components and plain js/ts files.\n\n### NPM Commands\n\nTo extract messages as catalogs and compile them for production, `@lingui/cli` provides cli commands that we can integrate to our project's workflow. Inside `package.json`, add these two commands:\n\n```json\n{\n\t\"scripts\": {\n\t\t// Add these commands\n\t\t\"extract\": \"lingui extract\",\n\t\t\"compile\": \"lingui compile --typescript\"\n\t}\n}\n```\n\nThese can be added to pre-commit hooks to make sure that new text are properly extracted and compiled.\n\n## Usage\n\nImporting the store for the first time will initiate Lingui's i18n instance with a default language and an empty message catalog.\n\n### Change the Active Locale\n\nLocale can be changed by accessing the `set` method of the `locale` store, passing in the desired locale and message catalog. To make sure that only the necessary message catalog is downloaded, use dynamic import, e.g.:\n\n```svelte\n<script lang=\"ts\">\n\timport { locale } from 'svelte-i18n-lingui';\n\n\tasync function setLocale(lang) {\n\t\tconst { messages } = await import(`../locales/${lang}.ts`);\n\t\tlocale.set(lang, messages);\n\t}\n</script>\n\n<button on:click={() => setLocale('en')}>Switch to English</button>\n<button on:click={() => setLocale('ja')}>Switch to Japanese</button>\n```\n\n### Basic Translations\n\nTo start translating in Svelte files, import the `t` store and auto-subscribe to it by prefixing with `$`:\n\n```svelte\n<script lang=\"ts\">\n\timport { t } from 'svelte-i18n-lingui';\n</script>\n\n<!-- Use directly as text element -->\n{$t`hello`}\n\n<!-- Use as attribute or prop -->\n<ComponentA propName={$t`hello`} />\n\n<!-- Supports parameterized text, for cases where different language has different order -->\n{$t`Proceed to ${$t`cart`}`}\n```\n\n### Predefined Messages\n\nSince the extractor does a static parse of the code, messages must be in plain string to be extractable. Template literals or variables names won't work.\n\n```svelte\n<script lang=\"ts\">\n\timport { t } from 'svelte-i18n-lingui';\n\n\tconst text = 'message';\n</script>\n\n{$t`${text}`}<!-- !!! Will not work, extractor cannot find the message to extract !!! -->\n```\n\nInstead, mark the string as extractable first with the provided `msg` function, and pass it to the store later on as a plain string (not as tagged template literal)\n\n```svelte\n<script lang=\"ts\">\n\timport { t, msg } from 'svelte-i18n-lingui';\n\n\tconst text = msg`message`;\n</script>\n\n{$t(text)}\n```\n\n### Interpolate Elements/Components\n\nTo include components or elements in the middle of the message, use the provided `<T>` component and use `#` characters to add slots in the middle of the text to insert elements or components. The first parameter is supplied through the default children snippet (as the content of the component), while subsequent parameters use snippets (`second`, `third`, `fourth`, `fifth` corresponding to the index of the parameter, starting from 1 for the default children snippet).\n\n```svelte\n<script lang=\"ts\">\n\timport { T } from 'svelte-i18n-lingui';\n</script>\n\n<T msg=\"Click # for #\">\n\t<a href=\"/about\">{$t`here`}</a>\n\t{#snippet second()}{$t`more information`}{/snippet}\n</T>\n```\n\n### MessageDescriptor Format\n\nSometimes we'll need to add a context info for messages that are exactly the same in the base language, but has different meanings in different places (e.g. in English `right` can either refer to direction or correctness). We can add a context by passing a message descriptor instead of plain string or literal string:\n\n```svelte\n{$t({\n\tmessage: 'right',\n\tcontext: 'direction',\n})}\n```\n\nThe context will be added on top of the message in the catalog, both of them combined are treated as a unique key for the message. Therefore, the same message with a different context will be extracted as separate entries in the catalog and can have its own translations.\n\nWe can also add a comment for the translators reading the message catalog e.g. to let them know how the message is going to be used. This is added as a pure comment on the message catalog and won't affect how the message is extracted or compiled.\n\n```svelte\n{$t({\n\tmessage: 'text',\n\tcontext: 'message for translator',\n})}\n```\n\nAlso, if you need to interpolate dynamic values into the message, you can use the `values` property in the MessageDescriptor object:\n\n```svelte\n{$t({\n\tmessage: 'Hello {name}!',\n\tvalues: { name: 'World' },\n})}\n```\n\n### Plurals\n\nTo provide different messages for text with numbers, use the provided `$plural` store:\n\n```svelte\n{$plural(count, {\n\tone: '# item',\n\tother: '# items',\n})}\n```\n\nRefer to Lingui's [pluralization guide](https://lingui.dev/guides/plurals) for more information on what keys are accepted on different locales.\n\n### Usage Outside of Svelte Components\n\nSince Svelte's stores are meant to be used in Svelte components, using them inside plain js/ts files is a bit awkward since you need to use the `get` helper to subscribe, get the value, and then immediately unsubscribe afterwards. `svelte-i18n-lingui` provides another way to access Lingui's i18n object through plain strings:\n\n- `$t` => `gt`\n- `$plural` => `gPlural`\n\n## Migration guide\n\n<details>\n<summary>v0.1.x to v0.2.x</summary>\n\n- Update Node version to at least v20\n- Version 0.2.x only supports Svelte 5. If you're still on Svelte 4, you can use v0.1.8 instead.\n- On a project with Svelte 5:\n  - If you're not ready to use runes mode yet, you can keep using the slots syntax by modifying the usages of `<T>` components to use the `<LegacyT>` component instead. Other than the component name and import changes, the syntax stays the same.\n  - If you're migrating to runes mode, use the new `<T>` component and switch to using snippets instead of slots if you have more than one parameter in the sentence. If there is only one parameter, then there is no need to change anything since default slot and children snippet has the same syntax.\n\n</details>\n\n## Known issues\n\n- When extracting to Lingui's PO format and enabling the `origins` option, the line numbers are always empty for `<T>` components usage. The line numbers work on any other syntax.\n  - When working in a larger project in a team, I suggest disabling origins on the PO file anyway, since they cause a lot of line changes in diff view every time a string is added/reused. This might cause merge conflicts when two people are modifying or reusing the same string, for example.\n\n## Contributing\n\nFound a bug? Feel free to open an issue or PR to fix it!\n",
	"legacy_svelte": false,
	"downloads_history": [
		[3589, 26],
		[3596, 17],
		[3603, 36],
		[3610, 15],
		[3617, 52],
		[3624, 44],
		[3631, 146],
		[3638, 19],
		[3645, 8],
		[3652, 22],
		[3659, 26],
		[3666, 133],
		[3673, 30],
		[3680, 14],
		[3687, 35],
		[3694, 32],
		[3701, 26],
		[3708, 32],
		[3715, 167],
		[3722, 559],
		[3729, 370],
		[3736, 442],
		[3743, 321],
		[3750, 415],
		[3757, 305],
		[3764, 472],
		[3771, 583],
		[3778, 365],
		[3785, 378],
		[3792, 446],
		[3799, 194],
		[3806, 264],
		[3813, 303],
		[3820, 282],
		[3827, 287],
		[3834, 157],
		[3841, 293],
		[3848, 410],
		[3855, 342],
		[3862, 525],
		[3869, 404],
		[3876, 281],
		[3883, 737],
		[3890, 298],
		[3897, 277],
		[3904, 306],
		[3911, 234],
		[3918, 344],
		[3925, 273],
		[3932, 336],
		[3939, 207],
		[3946, 228],
		[3953, 298],
		[3960, 464],
		[3967, 286],
		[3974, 136],
		[3981, 372],
		[3988, 214],
		[3995, 282],
		[4002, 221],
		[4009, 133],
		[4016, 152],
		[4023, 339],
		[4030, 338],
		[4037, 201],
		[4044, 219],
		[4051, 256],
		[4058, 144],
		[4065, 257],
		[4072, 91],
		[4079, 154],
		[4086, 227],
		[4093, 174],
		[4100, 364],
		[4107, 559],
		[4114, 901],
		[4121, 947],
		[4128, 973]
	],
	"esm": true,
	"cjs": false
}
